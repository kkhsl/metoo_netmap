(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2250de"],{e382:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"clearfix"},[a("span",{staticStyle:{"line-height":"28px"}},[e._v("用户管理")]),a("div",{staticClass:"fr"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleAdd}},[e._v("添加用户")]),a("el-button",{attrs:{size:"small",type:"info"},on:{click:function(t){return e.$router.push({path:"/"})}}},[e._v("返回首页")])],1)])]},proxy:!0}])},[a("viewTable",{attrs:{"table-data":e.tableData},on:{tabSelect:e.onTabSelect,emitDdit:e.onRowEdit,emitDel:e.onRowDel}}),a("Pagination",{ref:"pagain",attrs:{"current-page":e.postData.currentPage,pageSize:e.postData.pageSize,total:e.tableData.total},on:{"update:currentPage":function(t){return e.$set(e.postData,"currentPage",t)},"update:current-page":function(t){return e.$set(e.postData,"currentPage",t)},"update:pageSize":function(t){return e.$set(e.postData,"pageSize",t)},"update:page-size":function(t){return e.$set(e.postData,"pageSize",t)},handleCurrentpage:e.getUserList}}),a("el-dialog",{attrs:{width:"600px",title:"用户管理",visible:e.dialogFormVisible,"close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.close}},[a("el-form",{ref:"editForm",attrs:{"label-width":"100px",model:e.editForm,rules:e.rules,size:"mini"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入用户名",autocomplete:"off"},model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,"username",t)},expression:"editForm.username"}})],1),a("el-form-item",{attrs:{label:e.editForm.id?"重置密码":"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.editForm.password,callback:function(t){e.$set(e.editForm,"password",t)},expression:"editForm.password"}})],1),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.editForm.checkPass,callback:function(t){e.$set(e.editForm,"checkPass",t)},expression:"editForm.checkPass"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"norepeat",rawName:"v-norepeat"}],attrs:{size:"mini",type:"primary"},on:{click:e.submitFrom}},[e._v("确 定")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")])],1)],1)],1)},s=[],i=a("c7eb"),n=a("1da1"),o=(a("a15b"),a("d81d"),a("c24f")),c={data:function(){var e=this,t=function(e,t,a){t&&(t.length<6||t.length>20)&&a(new Error("密码长度为6~20个字符")),a()},a=function(t,a,r){a?a!==e.editForm.password&&r(new Error("两次输入密码不一致!")):r(),r()};return{postData:{currentPage:1,pageSize:10,status:0,type:0},tableData:{selection:!0,isLoading:!1,data:[],total:0,column:[{label:"序号",width:50},{label:"用户名",prop:"username"},{label:"密码",propFilter:function(){return"****"}},{label:"操作",width:100,actionBtn:[{emit:"emitDdit",icon:"el-icon-edit"},{emit:"emitDel",icon:"el-icon-delete"}]}]},dialogFormVisible:!1,editForm:{username:"",password:"",checkPass:""},rules:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,validator:t,trigger:"blur"}],checkPass:[{required:!0,validator:a,trigger:"blur"}]},tableSelectArr:[]}},mounted:function(){this.getUserList()},methods:{getUserList:function(){var e=this;return Object(n["a"])(Object(i["a"])().mark((function t(){var a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tableData.isLoading=!0,e.tableData.data=[],t.next=4,Object(o["d"])(e.postData);case 4:a=t.sent,200==a.code&&a.data?(e.tableData.data=a.data.obj,e.tableData.total=a.data.total):e.tableData.total=0,e.tableData.isLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},userStatusChange:function(e){this.postData.currentPage=1,this.getUserList()},onRowEdit:function(e){this.rules.password[0].required=!1,this.rules.checkPass[0].required=!1,this.editForm={id:e.id,username:e.username,password:"",checkPass:""},this.dialogFormVisible=!0},handleAdd:function(){this.rules.password[0].required=!0,this.rules.checkPass[0].required=!0,this.dialogFormVisible=!0},submitFrom:function(){var e=this;this.$refs.editForm.validate((function(t){if(t){var a=e.editForm,r={username:a.username,password:a.password||"",verifyPassword:a.checkPass||""};e.editForm.id&&(r.id=String(e.editForm.id)),e.tankLoading=!0,Object(o["i"])(r).then((function(t){200==t.code?(e.$message({message:"保存成功!",type:"success"}),e.dialogFormVisible=!1,e.getUserList()):e.$message({message:t.msg||"保存失败",type:"error"}),e.tankLoading=!1})).catch((function(t){console.log(t),e.tankLoading=!1}))}}))},lockedBtn:function(e){var t=this;return Object(n["a"])(Object(i["a"])().mark((function a(){var r,s,n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r="",s="",e&&e.id?(r=e.id,s=1==e.status?0:1):t.tableSelectArr.length&&(r=t.tableSelectArr.map((function(e){return e.id})).join(),s=1==t.tableSelectArr[0].status?0:1),a.next=5,Object(o["k"])({id:r,status:s});case 5:n=a.sent,200==n.code&&(1==s&&t.$message.success("用户已被禁用"),0==s&&t.$message.success("用户已启用"),t.getUserList());case 7:case"end":return a.stop()}}),a)})))()},onRowDel:function(e){var t=this;this.$confirm("将要删除用户"+e.username+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(Object(i["a"])().mark((function a(){var r;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(o["b"])({id:e.id});case 2:r=a.sent,200==r.code?(t.$message({title:"成功",message:"删除成功",type:"success"}),t.getUserList()):t.$message({message:"删除失败",type:"error"});case 4:case"end":return a.stop()}}),a)})))).catch((function(){}))},onTabSelect:function(e){this.tableSelectArr=e},allocationGroupBtn:function(){var e=this;return Object(n["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.tableSelectArr.length||e.$message.warning("请先选中用户");case 1:case"end":return t.stop()}}),t)})))()},close:function(){this.editForm={username:"",password:"",checkPass:""}}}},l=c,u=a("2877"),d=Object(u["a"])(l,r,s,!1,null,null,null);t["default"]=d.exports}}]);