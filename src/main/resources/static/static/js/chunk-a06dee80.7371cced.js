(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a06dee80","chunk-45b400ef","chunk-acc08244","chunk-878741da","chunk-08db8c1d","chunk-36118763","chunk-4ec10fa5","chunk-2d2250de"],{"010d":function(e,t,a){},"048b":function(e,t,a){},"0ae1":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"p-b-10"},[a("el-button-group",[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"mini"},on:{click:e.handleAdd}},[e._v("新增菜单")])],1)],1),a("viewTable",{attrs:{"table-data":e.viewTableData},on:{tabSelect:e.onTabSelect,edit:e.onRowEdit,deleteBtn:e.onRowDel}}),a("el-dialog",{attrs:{title:e.dialogFormTitle,visible:e.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{"label-width":"100px",model:e.editForm,rules:e.rules,size:"mini"}},[a("el-form-item",{attrs:{label:"菜单名称",prop:"name"}},[a("el-input",{model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),a("el-form-item",{attrs:{label:"父级"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.editForm.parentId,callback:function(t){e.$set(e.editForm,"parentId",t)},expression:"editForm.parentId"}},e._l(e.editForm.parentList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),a("span",{staticStyle:{color:"#909399","font-size":"12px"}},[e._v(" (默认一级菜单)")])],1),a("el-form-item",{attrs:{label:"图标名称"}},[a("el-input",{model:{value:e.editForm.icon,callback:function(t){e.$set(e.editForm,"icon",t)},expression:"editForm.icon"}})],1),a("el-form-item",{attrs:{label:"序列"}},[a("el-input",{model:{value:e.editForm.sequence,callback:function(t){e.$set(e.editForm,"sequence",t)},expression:"editForm.sequence"}})],1),a("el-form-item",{attrs:{label:"路由"}},[a("el-input",{model:{value:e.editForm.url,callback:function(t){e.$set(e.editForm,"url",t)},expression:"editForm.url"}})],1),a("el-form-item",{attrs:{label:"组件名称"}},[a("el-input",{model:{value:e.editForm.componentName,callback:function(t){e.$set(e.editForm,"componentName",t)},expression:"editForm.componentName"}})],1),a("el-form-item",{attrs:{label:"组件路径"}},[a("el-input",{model:{value:e.editForm.component,callback:function(t){e.$set(e.editForm,"component",t)},expression:"editForm.component"}})],1),a("el-form-item",{attrs:{label:"隐藏菜单"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.editForm.hidden,callback:function(t){e.$set(e.editForm,"hidden",t)},expression:"editForm.hidden"}})],1),a("el-form-item",{attrs:{label:"资源"}},[a("el-input",{model:{value:e.editForm.value,callback:function(t){e.$set(e.editForm,"value",t)},expression:"editForm.value"}})],1),a("el-form-item",[a("el-button",{directives:[{name:"norepeat",rawName:"v-norepeat"}],attrs:{type:"primary"},on:{click:e.submitFrom}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")])],1)],1)],1)],1)},i=[],n=a("c7eb"),r=a("1da1"),o=(a("b0c0"),a("b775"));function c(e){return Object(o["a"])({url:"admin/permission/list",method:"post",data:e})}function l(){return Object(o["a"])({url:"/admin/permission/add",method:"post"})}function u(e){return Object(o["a"])({url:"/admin/permission/save",method:"post",data:e})}function d(e){return Object(o["a"])({url:"/admin/permission/update",method:"post",data:e})}function p(e){return Object(o["a"])({url:"/admin/permission/delete",method:"post",data:e})}var m={name:"Menu",data:function(){return{viewTableData:{data:[],total:0,isLoading:!1,treeProps:{children:"childrenList"},style:"min-height:500px;",column:[{label:"菜单名称",prop:"name"},{label:"序列",prop:"sequence"},{label:"图标",prop:"icon",slot:"icon"},{label:"路由",prop:"url"},{label:"备注",prop:"describe"},{label:"操作",prop:"actions",actionBtn:[{emit:"edit",icon:"el-icon-edit-outline"},{emit:"deleteBtn",icon:"el-icon-delete"}]}]},selectionArr:[],dialogFormTitle:"",dialogFormVisible:!1,rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],value:[{required:!0,message:"请输入资源Value",trigger:"blur"}]},editForm:{}}},mounted:function(){this.getMuneList()},methods:{getMuneList:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c({currentPage:1,pageSize:99});case 2:a=t.sent,200==a.code&&(e.viewTableData.data=a.data.obj);case 4:case"end":return t.stop()}}),t)})))()},handleAdd:function(){var e=this;l().then((function(t){e.editForm={},e.editForm.parentList=t.data.parentList,e.dialogFormVisible=!0,e.dialogFormTitle="添加"}))},onRowEdit:function(e){var t=this;d({id:e.id}).then((function(e){var a=e.data;t.editForm=a.obj,t.editForm.parentList=a.parentList,a.obj.roleGroup&&(t.editForm.selectGroup=a.obj.roles[0].id||""),t.dialogFormTitle="编辑",t.dialogFormVisible=!0}))},submitFrom:function(){var e=this;this.$refs.editForm.validate((function(t){if(!t)return!1;var a=e.editForm,s={name:a.name,sequence:a.sequence,parentId:a.parentId,url:a.url,icon:a.icon,component:a.component,componentName:a.componentName,value:a.value||"",hidden:a.hidden};"编辑"==e.dialogFormTitle&&(s.id=String(e.editForm.id)),e.tankLoading=!0,u(s).then((function(t){200==t.code?(e.$message({message:e.dialogFormTitle+"成功!",type:"success"}),e.dialogFormVisible=!1,e.getMuneList()):e.$message({message:t.msg||"系统错误,添加失败",type:"error"}),e.tankLoading=!1})).catch((function(t){e.tankLoading=!1,console.log(t)}))}))},onRowDel:function(e){var t=this;this.$confirm("将要删除该条目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){p({id:e.id}).then((function(e){t.$message({message:"删除成功",type:"success"}),t.getMuneList()}))})).catch((function(){console.log(1)}))},onTabSelect:function(e){this.selectionArr=e}}},f=m,b=a("2877"),v=Object(b["a"])(f,s,i,!1,null,"6aaeeb8f",null);t["default"]=v.exports},1342:function(e,t,a){},1575:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container",staticStyle:{"max-width":"1200px"}},[a("div",{staticClass:"tipsRow m-b-10"},[e._v(" 本系统工作目录剩余空间: "),a("span",{staticStyle:{"font-weight":"bold","font-size":"14px",color:"#36cdbe"}},[e._v(e._s(e.freeSize))])]),a("div",{staticClass:"flexBox p-b-10"},[a("el-button-group",{staticClass:"filter-item"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.backupsFrom.flag=!0}}},[e._v("立即备份")]),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-upload2"},on:{click:function(t){e.importFileTank.flag=!0}}},[e._v("导入备份")]),a("el-button",{staticClass:"filter-item",attrs:{size:"mini"},on:{click:function(t){e.backupsSeting.flag=!0}}},[e._v("保存期限设置")]),a("el-button",{staticClass:"filter-item",attrs:{size:"mini"},on:{click:function(t){e.ftpSetTank=!0}}},[e._v("FTP设置")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:e.getBackUpListAsync}},[e._v("刷新")]),a("el-button",{staticClass:"filter-item",attrs:{size:"mini",disabled:!e.tableSelection.length,icon:"el-icon-delete"},on:{click:e.deleteBtn}},[e._v("删除")])],1),a("div",{staticClass:"flexBox"},[a("el-popover",{attrs:{placement:"top",width:"160"}},[a("p",[e._v("如无法备份或还原；点击确定，可重置备份还原状态，请谨慎操作！")]),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.resetStatusAsync}},[e._v("确定")])],1),a("el-button",{attrs:{slot:"reference",type:"warning",plain:"",size:"mini"},slot:"reference"},[e._v("备份/还原异常"),a("i",{staticClass:"el-icon-question el-icon--right"})])],1)],1)],1),a("viewTable",{attrs:{"table-data":e.viewTableData},on:{download:e.rowDownloadBtn,rollBack:e.rollBackBtn,tabSelect:e.handleSelectionChange}}),a("Pagination",{ref:"pagain",attrs:{pagesize:e.viewTablePost.limit,total:e.viewTableData.total},on:{handleCurrentpage:e.changePage}}),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"立即备份",visible:e.backupsFrom.flag,width:"600px",top:"5%"},on:{"update:visible":function(t){return e.$set(e.backupsFrom,"flag",t)}},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form",{ref:"backupsFromRef",attrs:{rules:e.backupsFromRules,size:"mini",model:e.backupsFrom,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"备份方式"}},[a("el-radio-group",{model:{value:e.backupsFrom.type,callback:function(t){e.$set(e.backupsFrom,"type",t)},expression:"backupsFrom.type"}},[a("el-radio",{attrs:{label:0}},[e._v("手动备份")]),a("el-radio",{attrs:{label:1}},[e._v("自动备份(每周)")])],1)],1),0===e.backupsFrom.type?a("el-form-item",{attrs:{prop:"fileName",label:"文件名称"}},[a("el-input",{attrs:{placerholder:"仅允许字母数字中文，中划线(不超过32个字符)",maxlength:32,clearable:"","auto-complete":"off",size:"mini"},model:{value:e.backupsFrom.fileName,callback:function(t){e.$set(e.backupsFrom,"fileName","string"===typeof t?t.trim():t)},expression:"backupsFrom.fileName"}})],1):e._e(),1===e.backupsFrom.type?[a("el-form-item",{attrs:{label:"是否开启:"}},[a("el-switch",{model:{value:e.backupsFrom.weekswitch,callback:function(t){e.$set(e.backupsFrom,"weekswitch",t)},expression:"backupsFrom.weekswitch"}})],1),a("el-form-item",{attrs:{label:"备份周期:"}},[a("el-radio-group",{model:{value:e.backupsFrom.weekDay,callback:function(t){e.$set(e.backupsFrom,"weekDay",t)},expression:"backupsFrom.weekDay"}},[a("el-radio",{staticClass:"m-b-10",attrs:{label:1}},[e._v("星期一")]),a("el-radio",{staticClass:"m-b-10",attrs:{label:2}},[e._v("星期二")]),a("el-radio",{staticClass:"m-b-10",attrs:{label:3}},[e._v("星期三")]),a("el-radio",{staticClass:"m-b-10",attrs:{label:4}},[e._v("星期四")]),a("el-radio",{staticClass:"m-b-10",attrs:{label:5}},[e._v("星期五")]),a("el-radio",{staticClass:"m-b-10",attrs:{label:6}},[e._v("星期六")]),a("el-radio",{staticClass:"m-b-10",attrs:{label:7}},[e._v("星期日")]),a("el-radio",{staticClass:"m-b-10",attrs:{label:0}},[e._v("每天")])],1)],1),a("el-form-item",{attrs:{label:"备份时间:",prop:"time"}},[a("el-time-picker",{attrs:{placeholder:"选择时间点"},model:{value:e.backupsFrom.time,callback:function(t){e.$set(e.backupsFrom,"time",t)},expression:"backupsFrom.time"}})],1)]:e._e()],2),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.backupsFrom.flag=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.backupsBtn}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"备份设置",visible:e.backupsSeting.flag,width:"600px",top:"5%"},on:{"update:visible":function(t){return e.$set(e.backupsSeting,"flag",t)}},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form",{ref:"backupConfigForm",attrs:{"label-width":"110px",size:"mini"}},[a("el-form-item",{attrs:{label:"备份保存时间",required:""}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"mini"},model:{value:e.backupsSeting.backupTime,callback:function(t){e.$set(e.backupsSeting,"backupTime",t)},expression:"backupsSeting.backupTime"}},e._l(e.backupsSeting.timeOptions,(function(e){return a("el-option",{key:e[0],attrs:{label:e[1],value:e[0]}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.backupsSeting.flag=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.subBackupForm}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"FTP设置",visible:e.ftpSetTank,width:"600px",top:"5%"},on:{"update:visible":function(t){e.ftpSetTank=t},open:e.getFtpSeting},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form",{ref:"FTPFormRef",attrs:{model:e.FTPForm,size:"mini",rules:e.ftprules,"label-width":"130px"}},[a("el-form-item",{attrs:{prop:"ftpHost",label:"FTP服务器IP:"}},[a("el-input",{attrs:{placeholder:"请输入FTP服务器ip地址",clearable:"","auto-complete":"off",size:"mini"},model:{value:e.FTPForm.ftpHost,callback:function(t){e.$set(e.FTPForm,"ftpHost","string"===typeof t?t.trim():t)},expression:"FTPForm.ftpHost"}})],1),a("el-form-item",{attrs:{prop:"ftpPort",label:"FTP服务器端口:"}},[a("el-input-number",{attrs:{min:0,max:65535,size:"mini"},model:{value:e.FTPForm.ftpPort,callback:function(t){e.$set(e.FTPForm,"ftpPort",t)},expression:"FTPForm.ftpPort"}})],1),a("el-form-item",{attrs:{label:"是否匿名:"}},[a("el-checkbox",{model:{value:e.FTPForm.obj1,callback:function(t){e.$set(e.FTPForm,"obj1",t)},expression:"FTPForm.obj1"}})],1),e.FTPForm.obj1?e._e():a("el-form-item",{attrs:{prop:"ftpUser",label:"用户名:"}},[a("el-input",{attrs:{placeholder:"请输入用户名",clearable:"","auto-complete":"off",size:"mini"},model:{value:e.FTPForm.ftpUser,callback:function(t){e.$set(e.FTPForm,"ftpUser","string"===typeof t?t.trim():t)},expression:"FTPForm.ftpUser"}})],1),e.FTPForm.obj1?e._e():a("el-form-item",{attrs:{prop:"ftpPassword",label:"密码:"}},[a("el-input",{attrs:{placeholder:"请输入密码",type:"password",clearable:"","auto-complete":"off",size:"mini"},model:{value:e.FTPForm.ftpPassword,callback:function(t){e.$set(e.FTPForm,"ftpPassword",t)},expression:"FTPForm.ftpPassword"}})],1),a("el-form-item",{attrs:{prop:"ftpFolder",label:"文件路径:"}},[a("el-input",{attrs:{placeholder:"",clearable:"","auto-complete":"off",size:"mini"},model:{value:e.FTPForm.ftpFolder,callback:function(t){e.$set(e.FTPForm,"ftpFolder",t)},expression:"FTPForm.ftpFolder"}})],1),a("el-form-item",{attrs:{label:"启用FTP:"}},[a("el-switch",{model:{value:e.enabledftp,callback:function(t){e.enabledftp=t},expression:"enabledftp"}}),a("el-alert",{staticStyle:{padding:"2px 4px"},attrs:{type:"error",closable:!1,title:"注意:FTP用户必须拥有上传文件和创建文件夹的权限"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.ftpSetTank=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.backbyftp}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"导入备份文件",visible:e.importFileTank.flag,width:"600px",top:"8%"},on:{"update:visible":function(t){return e.$set(e.importFileTank,"flag",t)},close:e.importFileTankClose},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.importFileTank.loading,expression:"importFileTank.loading"}],staticClass:"p-b-10",attrs:{type:"flex",justify:"center"}},[a("el-upload",{ref:"fileUpload",attrs:{action:"/",drag:"","file-list":e.importFileTank.fileList,"http-request":e.startUpload,accept:".tar.gz",multiple:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("点击上传")]),a("div",{staticClass:"el-upload__tip dangerC"},[e._v("格式为.tar.gz")])])],1)],1)],1)},i=[],n=a("c7eb"),r=a("1da1"),o=(a("ac1f"),a("00b4"),a("5319"),a("b680"),a("a4d3"),a("e01a"),a("a15b"),a("d81d"),a("b0c0"),a("5530")),c=a("b775");function l(e){return Object(c["a"])({url:"/admin/backup/db/list",method:"post",data:e})}function u(e){return Object(c["a"])({url:"/nspm/db/getFreeDiskSize",method:"post",data:e})}function d(e){return Object(c["a"])({url:"/admin/backup/db",method:"get",params:e})}function p(e){return Object(c["a"])({url:"/nspm/db/getBackupOrRecoverStatusData",method:"post",data:e})}function m(e){return Object(c["a"])({url:"/admin/backup/db/recover/"+e,method:"PUT"})}function f(){return Object(c["a"])({url:"/nspm/db/resetStatus.action",method:"post"})}function b(e){return Object(c["a"])({url:"/admin/backup/db/"+e.id,method:"DELETE"})}function v(e){return Object(c["a"])({url:"/nspm/db/querybackupconfig",method:"post",data:e})}function g(e){return Object(c["a"])({url:"/nspm/db/addBackupConfig",method:"post",data:e})}function h(e,t){return Object(c["a"])(Object(o["a"])({url:"/admin/backup/db/upload",method:"post",data:e},t))}function w(e){return Object(c["a"])({url:"/nspm/db/getBackupFtpList",method:"post",data:e})}function k(e){return Object(c["a"])({url:"/nspm/db/saveOrUpdateBackupFtp.action",method:"post",data:e})}var y={data:function(){var e=this,t=function(e,t,a){var s=/^[A-Za-z0-9-\u4e00-\u9fa5]{1,32}$/;""==t?a(new Error("文件名不允许为空！")):s.test(t)?a():a(new Error("仅允许字母数字中文，中划线"))},a=function(e,t,a){var s=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;if(""===t)a(new Error("请输入ip地址"));else{var i=t.replace(/\(.*?\)/g,"");s.test(i)?a():a(new Error("请输入有效ip地址"))}},s=function(t,a,s){e.FTPForm.obj1?s():""===a?s(new Error("请输入用户名")):s()},i=function(t,a,s){e.FTPForm.obj1?s():""===a?s(new Error("请输入密码")):s()};return{freeSize:0,viewTablePost:{start:0,limit:15},viewTableData:{data:[],total:0,isLoading:!1,selection:!0,style:"min-height:500px;",column:[{label:"序号",width:50},{label:"文件名称",prop:"filename"},{label:"文件大小",prop:"size",sortable:!0},{label:"备份时间",prop:"time",sortable:!0},{label:"操作",actionBtn:[{emit:"rollBack",text:"还原"},{emit:"download",text:"下载"}]}]},tableSelection:[],backupsFrom:{flag:!1,type:0,fileName:"",weekswitch:!1,weekDay:1,time:""},backupsFromRules:{fileName:[{required:!0,trigger:"blur",validator:t},{min:1,max:60,message:"长度在 1 到 60 个字符",trigger:"blur"}],time:[{required:!0,message:"请选择备份时间",trigger:"blur"}]},backupOrReset:{timer:null,isRollBack:!1},backupsSeting:{flag:!1,timeOptions:[["1","最近三个月"],["2","最近六个月"],["3","最近一年"],["4","最近两年"],["5","最近三年"]],backupTime:"1"},ftpSetTank:!1,enabledftp:!1,FTPForm:{ftpHost:"",ftpPort:21,ftpUser:"",ftpPassword:"",ftpFolder:"/",enabled:-1,obj1:!1},ftprules:{ftpHost:[{required:!0,validator:a,trigger:"blur"}],ftpPort:[{required:!0,message:"请输入端口",trigger:"blur"}],ftpUser:[{required:!0,trigger:"blur",validator:s}],ftpPassword:[{required:!0,validator:i,trigger:"blur"}]},importFileTank:{flag:!1,fileList:[],result:"",loading:!1}}},mounted:function(){this.getFreeDiskSize(),this.getBackUpListAsync(),this.queryBackConfig("keeptime"),this.queryBackConfig("weekautoBackup")},methods:{getFreeDiskSize:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a,s;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u();case 2:a=t.sent,200==a.code&&a.data.success&&(s=a.data.result,s<=Math.pow(1024,1)?e.freeSize=s+"MB":s<=Math.pow(1024,2)?e.freeSize=(s/Math.pow(1024,1)).toFixed(2)+"GB":s<=Math.pow(1024,3)?e.freeSize=(s/Math.pow(1024,2)).toFixed(2)+"TB":s<=Math.pow(1024,4)&&(e.freeSize=(s/Math.pow(1024,3)).toFixed(2)+"PB"));case 4:case"end":return t.stop()}}),t)})))()},getBackUpListAsync:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.viewTableData.isLoading=!0,t.next=3,l(e.viewTablePost);case 3:a=t.sent,200==a.code&&a.data.rows?(e.viewTableData.data=a.data.rows,e.viewTableData.total=a.data.total):(e.viewTableData.data=[],e.viewTableData.total=0),e.viewTableData.isLoading=!1;case 6:case"end":return t.stop()}}),t)})))()},rollBackBtn:function(e){var t=this,a=e.filename,s=e.position,i=e.description;this.$confirm("确定要还原吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(Object(n["a"])().mark((function e(){var r;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m({filename:a,position:s,description:i});case 2:r=e.sent,200==r.code&&0==r.data.status?(t.backupOrReset.isRollBack=!0,t.backupOrReset.loading=t.$loading({lock:!0,text:"正在还原...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.6)"}),t.getBackupOrRecoverStatusDataAsync()):t.$message({message:r.data.data.result,type:"warning"});case 4:case"end":return e.stop()}}),e)}))))},rowDownloadBtn:function(e){window.location.href="/nspm/db/downloadBackupDate?filePath="+e.filename},changePage:function(e){this.viewTablePost.start=(e-1)*this.viewTablePost.limit,this.getBackUpListAsync()},unitToInt:function(e){return"G"==e?3:"M"==e?2:"K"==e?1:void 0},changesort:function(e,t){var a=e.size,s=t.size,i=this.unitToInt(a.substring(a.length-1,a.length)),n=a.substring(0,a.length-1),r=this.unitToInt(s.substring(s.length-1,s.length)),o=s.substring(0,s.length-1);return i-r>0||i-r==0&&parseInt(n)>parseInt(o)},handleSelectionChange:function(e){this.tableSelection=e},backupsBtn:function(){var e=this;this.$refs.backupsFromRef.validate(function(){var t=Object(r["a"])(Object(n["a"])().mark((function t(a){var s,i,r;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=13;break}if(0!==e.backupsFrom.type){t.next=8;break}return t.next=4,d({description:e.backupsFrom.fileName});case 4:s=t.sent,200==s.code&&0==s.data.status?(e.backupsFrom.flag=!1,e.backupOrReset.isRollBack=!1,e.backupOrReset.loading=e.$loading({lock:!0,text:"正在备份...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.6)"}),e.getBackupOrRecoverStatusDataAsync()):e.$message({message:s.data.data.result||s.msg,type:"warning"}),t.next=13;break;case 8:return i=[e.backupsFrom.weekswitch,e.backupsFrom.weekDay,e.backupsFrom.time.getHours(),e.backupsFrom.time.getMinutes(),e.backupsFrom.time.getSeconds()],t.next=11,g({key:"weekautoBackup",value:i.join()});case 11:r=t.sent,200==r.code&&r.data.success?(e.$message({message:"保存成功",type:"success"}),e.backupsFrom.flag=!1,e.queryBackConfig("weekautoBackup")):e.$message({message:"保存失败!",type:"warning"});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getBackupOrRecoverStatusDataAsync:function(){var e=this;this.backupOrReset.timer=setInterval(Object(r["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:a=t.sent,200==a.code?(a.data.list&&e.$message({dangerouslyUseHTMLString:!0,message:a.data.list.join("</br>")}),0==a.data.status&&setTimeout((function(){e.backupOrReset.loading&&(e.backupOrReset.loading.close(),e.backupOrReset.loading=null),e.$message({message:"处理成功",type:"success"}),e.getBackUpListAsync(),e.backupOrReset.isRollBack&&e.logout()}),1e3),-1!==a.data.status&&clearInterval(e.backupOrReset.timer)):clearInterval(e.backupOrReset.timer);case 4:case"end":return t.stop()}}),t)}))),3e3)},logout:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("user/logout");case 2:e.$router.push("/login?redirect=".concat(e.$route.fullPath));case 3:case"end":return t.stop()}}),t)})))()},deleteBtn:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a,s;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.tableSelection.map((function(e){return e.id})).join(","),t.next=3,b({ids:a});case 3:s=t.sent,200==s.code&&s.data.success?(e.$message({message:"删除成功",type:"success"}),e.getBackUpListAsync()):e.$message({message:"删除失败!",type:"warning"});case 5:case"end":return t.stop()}}),t)})))()},queryBackConfig:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function a(){var s,i;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,v({key:e||""});case 2:s=a.sent,200==s.code&&s.data.data&&("keeptime"==e?t.backupsSeting.backupTime=s.data.data.configvalue||"1":(i=s.data.data.configvalue.split(",")||[!1,"1",0,0,0],t.backupsFrom.weekswitch="true"===i[0],t.backupsFrom.weekDay=parseInt(i[1]),t.backupsFrom.time=new Date(2022,5,30,i[2]||0,i[3]||0,i[4]||0)));case 4:case"end":return a.stop()}}),a)})))()},subBackupForm:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g({key:"keeptime",value:e.backupsSeting.backupTime});case 2:a=t.sent,200==a.code&&a.data.success?(e.$message({message:"保存成功",type:"success"}),e.backupsSeting.flag=!1):e.$message({message:"保存失败!",type:"warning"});case 4:case"end":return t.stop()}}),t)})))()},resetStatusAsync:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:a=t.sent,200==a.code&&a.data.success?e.$message({message:a.data.result,type:"success"}):e.$message({message:"操作失败",type:"error"});case 4:case"end":return t.stop()}}),t)})))()},getFtpSeting:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a,s;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,w();case 2:a=t.sent,200==a.code&&0==a.data.status?(s=a.data.result.length?a.data.result[0]:{},e.FTPForm={id:s.id||"",ftpHost:s.ftpHost||"",ftpPort:s.ftpPort||"",ftpUser:s.ftpUser||"",ftpPassword:s.ftpPassword||"",ftpFolder:s.ftpFolder||"",enabled:s.enabled&&"0"==s.enabled?0:-1,obj1:!(!s.obj1||"true"!=s.obj1)},e.enabledftp=!(!s.enabled||"0"!=s.enabled)):e.FTPForm={id:"",ftpHost:"",ftpPort:0,ftpUser:"",ftpPassword:"",ftpFolder:"",enabled:-1,obj1:!1};case 4:case"end":return t.stop()}}),t)})))()},backbyftp:function(){var e=this;this.$refs.FTPFormRef.validate(function(){var t=Object(r["a"])(Object(n["a"])().mark((function t(a){var s,i;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=6;break}return s={id:e.FTPForm.id||"",ftpHost:e.FTPForm.ftpHost,ftpPort:e.FTPForm.ftpPort,ftpUser:e.FTPForm.obj1?"anonymous":e.FTPForm.ftpUser,ftpPassword:e.FTPForm.obj1?"":e.FTPForm.ftpPassword,ftpFolder:e.FTPForm.ftpFolder,enabled:e.enabledftp?"0":"-1",obj1:e.FTPForm.obj1},t.next=4,k(s);case 4:i=t.sent,200==i.code&&"0"==i.data.status?(e.$message({type:"success",message:"操作成功！"}),e.ftpSetTank=!1):e.$message({type:"error",message:i.msg||"操作失败！"});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},startUpload:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function a(){var s,i;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=new FormData,s.append("file",e.file),s.append("fileName",e.file.name),s.append("fileSize",e.file.size),a.next=6,h(s,{onUploadProgress:function(t){var a=t.loaded/t.total*100|0;e.onProgress({percent:a})}});case 6:i=a.sent,200==i.code?t.$message({message:"上传成功",type:"success"}):t.$message({message:"上传失败",type:"error"});case 8:case"end":return a.stop()}}),a)})))()},importFileTankClose:function(){this.importFileTank.fileList=[],this.getBackUpListAsync()}}},x=y,F=(a("ef73"),a("2877")),_=Object(F["a"])(x,s,i,!1,null,"13984fb4",null);t["default"]=_.exports},"1db4":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wscn-http404-container"},[a("div",{staticClass:"wscn-http404"},[e._m(0),a("div",{staticClass:"bullshit"},[a("div",{staticClass:"bullshit__oops"},[e._v("提醒!")]),e._m(1),a("div",{staticClass:"bullshit__headline"},[e._v(e._s(e.message))]),a("div",{staticClass:"bullshit__info"},[e._v("请检查您输入的网址是否正确，或单击下面的按钮返回主页。")]),a("a",{staticClass:"bullshit__return-home",attrs:{href:"/"}},[e._v("返回首页")])])])])},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pic-404"},[s("img",{staticClass:"pic-404__parent",attrs:{src:a("a36b"),alt:"404"}}),s("img",{staticClass:"pic-404__child left",attrs:{src:a("26fc"),alt:"404"}}),s("img",{staticClass:"pic-404__child mid",attrs:{src:a("26fc"),alt:"404"}}),s("img",{staticClass:"pic-404__child right",attrs:{src:a("26fc"),alt:"404"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bullshit__info"},[e._v(" 版权所有 "),a("a",{staticStyle:{color:"#20a0ff"},attrs:{href:"/",target:"_blank"}},[e._v("湖南觅通科技信息有限公司")])])}],n={name:"Page404",computed:{message:function(){return"您没有权限进入或者找不到该页面..."}}},r=n,o=(a("d22e"),a("2877")),c=Object(o["a"])(r,s,i,!1,null,"2d5e819b",null);t["default"]=c.exports},"24e2":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"errPage-container"},[a("el-button",{staticClass:"pan-back-btn",attrs:{icon:"el-icon-arrow-left"},on:{click:e.back}},[e._v(" 返回 ")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("h1",{staticClass:"text-jumbo text-ginormous"},[e._v(" Oops! ")]),e._v(" gif来源"),a("a",{attrs:{href:"https://zh.airbnb.com/",target:"_blank"}},[e._v("airbnb")]),e._v(" 页面 "),a("h2",[e._v("你没有权限去该页面")]),a("h6",[e._v("如有不满请联系你领导")]),a("ul",{staticClass:"list-unstyled"},[a("li",[e._v("或者你可以去:")]),a("li",{staticClass:"link-type"},[a("router-link",{attrs:{to:"/liveRoom"}},[e._v(" 回首页 ")])],1),a("li",{staticClass:"link-type"},[a("a",{attrs:{href:"https://www.taobao.com/"}},[e._v("随便看看")])]),a("li",[a("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.dialogVisible=!0}}},[e._v("点我看图")])])])]),a("el-col",{attrs:{span:12}},[a("img",{attrs:{src:e.errGif,width:"313",height:"428",alt:"Girl has dropped her ice cream."}})])],1),a("el-dialog",{attrs:{visible:e.dialogVisible,title:"随便看","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{staticClass:"pan-img",attrs:{src:e.ewizardClap}})])],1)},i=[],n=a("cc6c"),r=a.n(n),o={name:"Page401",data:function(){return{errGif:r.a+"?"+ +new Date,ewizardClap:"https://wpimg.wallstcn.com/007ef517-bafd-4066-aae4-6883632d9646",dialogVisible:!1}},methods:{back:function(){this.$route.query.noGoBack?this.$router.push({path:"/liveRoom"}):this.$router.go(-1)}}},c=o,l=(a("4b82"),a("2877")),u=Object(l["a"])(c,s,i,!1,null,"442452b1",null);t["default"]=u.exports},"26fc":function(e,t,a){e.exports=a.p+"static/img/404_cloud.0f4bc32b.png"},2985:function(e,t,a){},"2ca7":function(e,t,a){},"2f54":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-card",{directives:[{name:"show",rawName:"v-show",value:!e.authorized,expression:"!authorized"}],scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"clearfix"},[a("span",{staticStyle:{"line-height":"28px"}},[e._v("授权设置")]),a("div",{staticClass:"fr"},[a("el-button",{attrs:{size:"small",type:"info"},on:{click:function(t){return e.$router.push({path:"/"})}}},[e._v("返回首页")])],1)])]},proxy:!0}])},[a("el-form",{attrs:{size:"mini","label-width":"100px",model:e.authFrom,rules:e.rules}},[a("el-form-item",{attrs:{label:"SN 码:"}},[e._v(e._s(e.authFrom.code))]),a("el-form-item",{attrs:{label:"单位:",prop:"unit_id"}},[a("el-cascader",{staticClass:"selectUnitInput",staticStyle:{width:"100%"},attrs:{placeholder:"请选择单位","popper-class":"selectUnit",options:e.unitSelectArr,props:{label:"name",value:"id",children:"subAreas",emitPath:!1},filterable:""},on:{change:e.handleCascaderChange},model:{value:e.authFrom.unit_id,callback:function(t){e.$set(e.authFrom,"unit_id",t)},expression:"authFrom.unit_id"}})],1),a("el-form-item",{attrs:{prop:"sqm",label:"授权申请码"}},[a("el-input",{attrs:{placeholder:"选中单位自动获取申请码",type:"text",clearable:"","auto-complete":"off",size:"mini"},model:{value:e.authFrom.sqm,callback:function(t){e.$set(e.authFrom,"sqm","string"===typeof t?t.trim():t)},expression:"authFrom.sqm"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-copy-document"},on:{click:function(t){return e.copyBtn(e.authFrom.sqm)}},slot:"append"},[e._v("复制")])],1)],1)],1),a("el-form",{ref:"authLicenseForm",attrs:{size:"mini","label-width":"100px",model:e.authLicenseForm,rules:e.authLicenseFormRules}},[a("el-form-item",{attrs:{prop:"code",label:"授权码"}},[a("el-input",{attrs:{autosize:{minRows:5,maxRows:10},placeholder:"请输入授权码，授权码由授权申请码生成",type:"textarea",clearable:"","auto-complete":"off",size:"mini"},model:{value:e.authLicenseForm.code,callback:function(t){e.$set(e.authLicenseForm,"code","string"===typeof t?t.trim():t)},expression:"authLicenseForm.code"}})],1)],1),a("div",{staticClass:"flexCC"},[a("el-button",{attrs:{type:"success"},on:{click:e.confirmAuth}},[e._v("授权")])],1)],1),a("el-card",{directives:[{name:"show",rawName:"v-show",value:e.authorized,expression:"authorized"}],scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"clearfix"},[a("span",{staticStyle:{"line-height":"28px"}},[e._v("授权信息")]),a("div",{staticClass:"fr"},[a("el-button",{attrs:{size:"small",type:"info"},on:{click:function(t){return e.$router.push({path:"/"})}}},[e._v("返回首页")])],1)])]},proxy:!0}])},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:12,sm:8,md:6}},[a("el-card",{staticClass:"licenItem"},[a("p",{staticClass:"i_title"},[e._v("版本")]),a("p",{staticClass:"i_value"},[e._v(e._s(e.licenseInfo.licenseVersion))])])],1),a("el-col",{attrs:{xs:12,sm:8,md:6}},[a("el-card",{staticClass:"licenItem"},[a("p",{staticClass:"i_title"},[e._v("地市")]),a("p",{staticClass:"i_value"},[e._v(e._s(e.licenseInfo.city))])])],1),a("el-col",{attrs:{xs:12,sm:8,md:6}},[a("el-card",{staticClass:"licenItem"},[a("p",{staticClass:"i_title"},[e._v("县区")]),a("p",{staticClass:"i_value"},[e._v(e._s(e.licenseInfo.area))])])],1),a("el-col",{attrs:{xs:12,sm:8,md:6}},[a("el-card",{staticClass:"licenItem"},[a("p",{staticClass:"i_title"},[e._v("单位名称")]),a("p",{staticClass:"i_value"},[e._v(e._s(e.licenseInfo.unit))])])],1),a("el-col",{attrs:{xs:12,sm:8,md:6}},[a("el-card",{staticClass:"licenItem"},[a("p",{staticClass:"i_title"},[e._v("开始时间")]),a("p",{staticClass:"i_value"},[e._v(e._s(e.parseTime(e.licenseInfo.startTime)))])])],1),a("el-col",{attrs:{xs:12,sm:8,md:6}},[a("el-card",{staticClass:"licenItem"},[a("p",{staticClass:"i_title"},[e._v("截止时间")]),a("p",{staticClass:"i_value"},[e._v(e._s(e.parseTime(e.licenseInfo.endTime)))])])],1),a("el-col",{attrs:{xs:12,sm:8,md:6}},[a("el-card",{staticClass:"licenItem"},[a("p",{staticClass:"i_title"},[e._v("授权天数")]),a("p",{staticClass:"i_value"},[e._v(e._s(e.licenseInfo.licenseDay))])])],1),a("el-col",{attrs:{xs:12,sm:8,md:6}},[a("el-card",{staticClass:"licenItem"},[a("p",{staticClass:"i_title"},[e._v("剩余天数")]),a("p",{staticClass:"i_value"},[e._v(e._s(e.licenseInfo.surplusDay))])])],1)],1)],1)],1)},i=[],n=a("c7eb"),r=a("1da1"),o=(a("d3b7"),a("159b"),a("cbcf")),c=a("ed08"),l={data:function(){return{loading:!1,authorized:!0,licenseInfo:{},authFrom:{code:"",unit_id:"",sqm:""},authLicenseForm:{code:""},unitSelectArr:[],rules:{unit_id:[{required:!0,message:"单位不能为空",trigger:"blur"}]},authLicenseFormRules:{code:[{required:!0,message:"授权码不能为空",trigger:"blur"}],sqm:[{required:!0,message:"授权申请码不能为空",trigger:"blur"}]}}},mounted:function(){this.getLicenseInfo()},methods:{parseTime:c["b"],getUnitInfo:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["e"])();case 2:a=t.sent,200==a.code&&(e.unitSelectArr=e.preprocessData(a.data));case 4:case"end":return t.stop()}}),t)})))()},handleCascaderChange:function(){var e=this;this.authFrom.unit_id&&setTimeout((function(){var t=document.querySelector(".selectUnitInput input").value;t&&t.split("/")[2]&&(t=t.split("/")[2]||""),e.$confirm(t,"单位信息确认",{confirmButtonText:"确定",cancelButtonText:"取消",customClass:"topConfirm",closeOnClickModal:!1,type:"warning"}).then((function(){e.creatAuthCode({code:e.authFrom.code,area_id:e.authFrom.unit_id})})).catch((function(){e.authFrom.unit_id="",e.authFrom.sqm=""}))}),500)},getLicenseInfo:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(o["c"])();case 3:a=t.sent,200==a.code?(e.licenseInfo=a.data,e.authorized=!0):(e.licenseInfo={},e.authorized=!1,e.getUnitInfo(),e.getSystemInfo()),e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},getSystemInfo:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["d"])();case 2:a=t.sent,200==a.code?e.authFrom.code=a.data:e.$message({message:"数据获取失败!",type:"warning"});case 4:case"end":return t.stop()}}),t)})))()},creatAuthCode:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function a(){var s;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(o["a"])(e);case 2:s=a.sent,200==s.code?t.authFrom.sqm=s.data:t.$message({type:"error",message:s.msg||"授权失败"});case 4:case"end":return a.stop()}}),a)})))()},confirmAuth:function(){var e=this;this.$refs.authLicenseForm.validate(function(){var t=Object(r["a"])(Object(n["a"])().mark((function t(a){var s;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=5;break}return t.next=3,Object(o["b"])({license:e.authLicenseForm.code});case 3:s=t.sent,200==s.code?(e.$message({type:"success",message:"授权成功"}),e.getLicenseInfo()):e.$message({type:"error",message:s.msg||"授权失败"});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},copyBtn:function(e){var t=document.createElement("textarea");t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.value=e,t.select();try{document.execCommand("copy"),this.$message.success("复制成功")}catch(a){this.$notify({type:"warning",title:"复制失败,请手动选择复制内容",dangerouslyUseHTMLString:!0,message:'<p style="white-space: normal; word-break: break-all;">'.concat(e,"</p>"),duration:5e3})}document.body.removeChild(t)},preprocessData:function(e){function t(e){e.subAreas&&e.subAreas.length?e.subAreas.forEach((function(e){t(e)})):delete e.subAreas}return e.forEach((function(e){t(e)})),e}}},u=l,d=(a("faab"),a("e20a"),a("2877")),p=Object(d["a"])(u,s,i,!1,null,"76bf6ed0",null);t["default"]=p.exports},"37f9":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"grid",staticStyle:{position:"relative"}},[a("el-col",{staticClass:"gridItem",attrs:{sm:12,md:8,lg:6}},[a("div",{staticClass:"card flexCC",on:{click:function(t){return e.jump("/surveying")}}},[a("h3",{staticClass:"title"},[e._v("网络测绘")])])]),a("el-col",{staticClass:"gridItem",attrs:{sm:12,md:8,lg:6}},[a("div",{staticClass:"card flexCC",on:{click:function(t){return e.jump("/empower")}}},[a("h3",{staticClass:"title"},[e._v(e._s(e.authorized?"授权信息":"未授权"))]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.authorized,expression:"authorized"}],staticClass:"descWrap"},[a("p",{staticClass:"desc"},[e._v("版本:"+e._s(e.licenseInfo.licenseVersion))]),a("p",{staticClass:"desc"},[e._v(" 当前授权: "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.licenseInfo.city,expression:"licenseInfo.city"}]},[e._v(e._s(e.licenseInfo.city))]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.licenseInfo.area,expression:"licenseInfo.area"}]},[e._v(e._s(e.licenseInfo.area))]),e._v(" "+e._s(e.licenseInfo.unit)+" ")]),a("p",{staticClass:"desc"},[e._v("到期时间:"+e._s(e.parseTime(e.licenseInfo.endTime)))])])])]),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.compareVersions<0,expression:"compareVersions < 0"}],staticClass:"gridItem",attrs:{sm:12,md:8,lg:6}},[a("div",{staticClass:"card flexCC",on:{click:e.startUpdateFn}},[a("h3",{staticClass:"title"},[e._v("版本升级")]),a("div",{staticClass:"descWrap"},[a("p",{staticClass:"desc"},[e._v("发现新版本("+e._s(e.version.version)+")")]),a("p",{staticClass:"desc"},[e._v("立即升级")])])])])],1)},i=[],n=a("c7eb"),r=a("1da1"),o=(a("d81d"),a("a9e3"),a("cbcf")),c=a("b775");function l(e){return Object(c["a"])({url:"/admin/application/version",method:"get",params:e})}function u(e){return Object(c["a"])({url:"/admin/application/version/maual/update",method:"get",params:e})}function d(e){return Object(c["a"])({url:"/admin/application/version/update/state",method:"get",params:e})}var p=a("ed08"),m=a("84d3"),f=a.n(m),b={name:"INDEX",data:function(){return{version:{currentVersion:"0.0.0.0",version:"0.0.0.0"},updateLoading:null,authorized:!1,licenseInfo:{}}},mounted:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getUpdateState(),new f.a(e.$refs.grid,{itemSelector:".gridItem"});case 2:case"end":return t.stop()}}),t)})))()},activated:function(){this.getLicenseInfo(),this.getVersionInfo()},computed:{compareVersions:function(){var e=this.version.currentVersion.split(".").map(Number),t=this.version.version.split(".").map(Number),a=Math.max(e.length,t.length);while(e.length<a)e.push(0);while(t.length<a)t.push(0);for(var s=0;s<a;s++){if(e[s]>t[s])return 1;if(e[s]<t[s])return-1}return 0}},methods:{parseTime:p["b"],getLicenseInfo:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["c"])();case 2:a=t.sent,200==a.code?(e.licenseInfo=a.data,e.authorized=!0):(e.licenseInfo={},e.authorized=!1);case 4:case"end":return t.stop()}}),t)})))()},getVersionInfo:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a,s,i,r,o;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l();case 2:a=t.sent,200==a.code&&(s=a.data,i=s.currentVersion,r=void 0===i?"0.0.0.0":i,o=s.version,e.version={currentVersion:r,version:o});case 4:case"end":return t.stop()}}),t)})))()},getUpdateState:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d();case 2:a=t.sent,200==a.code&&a.data&&a.data.state>0&&a.data.state<4?(e.updateLoading||(e.updateLoading=e.$loading({lock:!0,text:"正在升级中...请勿刷新页面, 如升级完成请按ctrl+f5刷新页面",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.6)"})),setTimeout(e.getUpdateState,3e3)):(e.updateLoading&&e.updateLoading.close(),e.updateLoading=null);case 4:case"end":return t.stop()}}),t)})))()},startUpdateFn:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:setTimeout(e.getUpdateState,1e3),u().then((function(t){setTimeout((function(){e.updateLoading&&e.updateLoading.close(),200==t.code?e.$message.success(t.msg):e.$message.error(t.msg),setTimeout((function(){location.href=location.href+"?time="+(new Date).getTime()}),3e3)}),3e4)}));case 2:case"end":return t.stop()}}),t)})))()},jump:function(e,t){this.$router.push({path:e,query:t})}}},v=b,g=(a("45c8"),a("2877")),h=Object(g["a"])(v,s,i,!1,null,"2a2517b6",null);t["default"]=h.exports},3925:function(e,t,a){},"404a":function(e,t,a){"use strict";a("c4df")},"45c8":function(e,t,a){"use strict";a("048b")},"4b25":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"inline"},[a("el-popover",{attrs:{placement:"bottom-start",offset:20,trigger:"click"},model:{value:e.actionsGroupVisible,callback:function(t){e.actionsGroupVisible=t},expression:"actionsGroupVisible"}},[e._t("default",[a("el-input",{staticClass:"myInput",attrs:{slot:"reference",readonly:"",size:"mini",placeholder:"组织部门"},slot:"reference",model:{value:e.selectTreeObj.mc,callback:function(t){e.$set(e.selectTreeObj,"mc",t)},expression:"selectTreeObj.mc"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.selectTreeObj.mc,expression:"selectTreeObj.mc"}],staticClass:"hoverCloseBtn flexCC",attrs:{slot:"suffix"},on:{click:e.removeSelect},slot:"suffix"},[a("i",{staticClass:"el-icon-circle-close"})])])]),a("div",{staticClass:"filter-tree"},[a("el-input",{staticClass:"mb10",attrs:{size:"mini",placeholder:"输入名称快速定位"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),a("el-tree",{ref:"tree",staticStyle:{"max-height":"50vh",overflow:"auto"},attrs:{data:e.treeData,"node-key":"DM","highlight-current":"","expand-on-click-node":!1,props:{children:"childs",label:"MC"},"default-expanded-keys":e.defaultExpandedKeys,indent:20,"filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick}})],1)],2)],1)},i=[],n=a("b85c"),r=a("c7eb"),o=a("1da1"),c=(a("4de4"),a("d3b7"),a("e9c4"),a("b775"));function l(e){return Object(c["a"])({url:"/admin/organization/query",method:"get",params:e})}var u={props:["defaultsSelectKey"],data:function(){return{defaultExpandedKeys:[],actionsGroupVisible:!1,filterText:"",treeData:[],selectTreeObj:{}}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},mounted:function(){this.getListFn()},methods:{getListFn:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.treeData=[],e.selectTreeObj={},t.next=4,l();case 4:a=t.sent,200==a.code&&(e.treeData=a.data,e.setDefault());case 6:case"end":return t.stop()}}),t)})))()},setDefault:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.defaultsSelectKey){t.next=2;break}return t.abrupt("return");case 2:e.selectTreeObj=Object.assign({},e.getSelect(e.treeData,(function(t){return e.defaultsSelectKey===t.DM}))),e.$nextTick((function(){e.selectTreeObj&&e.selectTreeObj.DM&&(e.$refs.tree.setCurrentKey(e.selectTreeObj.DM),e.defaultExpandedKeys=[e.selectTreeObj.DM])}));case 4:case"end":return t.stop()}}),t)})))()},getSelect:function(e,t){var a,s=Object(n["a"])(e);try{for(s.s();!(a=s.n()).done;){var i=a.value;if(t(i))return i;if(i.childs){var r=this.getSelect(i.childs,t);if(r&&"{}"!==JSON.stringify(r))return r}}}catch(o){s.e(o)}finally{s.f()}return{}},removeSelect:function(e){e.stopPropagation(),this.selectTreeObj={},this.handleNodeClick({DM:""}),this.$refs.tree.setCurrentKey(null)},filterNode:function(e,t){return!e||t["mc"]&&-1!==t["mc"].indexOf(e)},handleNodeClick:function(e){this.selectTreeObj.DM!=e.DM&&(this.selectTreeObj=Object.assign({},e),this.$emit("nodeClick",e),this.actionsGroupVisible=!1,e.DM||this.$refs.tree.setCurrentKey(null))}}},d=u,p=(a("8d8c"),a("2877")),m=Object(p["a"])(d,s,i,!1,null,"281043b9",null);t["a"]=m.exports},"4b82":function(e,t,a){"use strict";a("f1bd")},"5cdf":function(e,t,a){"use strict";a("2ca7")},6145:function(e,t,a){},"6ef2":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"clearfix"},[a("span",{staticStyle:{"line-height":"28px"}},[e._v("登录日志")]),a("div",{staticClass:"fr"},[a("el-button",{attrs:{size:"small",type:"info"},on:{click:function(t){return e.$router.push({path:"/"})}}},[e._v("返回首页")])],1)])]},proxy:!0}])},[a("div",{staticClass:"p-b-10"},[a("el-input",{staticClass:"m-r-10",staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"用户名查找","prefix-icon":"el-icon-search",clearable:""},on:{clear:function(t){e.viewTablePost.currentPage=1,e.getAsyncList()}},nativeOn:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.viewTablePost.currentPage=1,e.getAsyncList()}},model:{value:e.viewTablePost.XM,callback:function(t){e.$set(e.viewTablePost,"XM",t)},expression:"viewTablePost.XM"}})],1),a("viewTable",{attrs:{"table-data":e.viewTableData},on:{tabSelect:e.handleSelectionChange}}),a("Pagination",{ref:"pagain",attrs:{total:e.viewTableData.total,"current-page":e.viewTablePost.currentPage,pageSize:e.viewTablePost.pageSize},on:{"update:currentPage":function(t){return e.$set(e.viewTablePost,"currentPage",t)},"update:current-page":function(t){return e.$set(e.viewTablePost,"currentPage",t)},"update:pageSize":function(t){return e.$set(e.viewTablePost,"pageSize",t)},"update:page-size":function(t){return e.$set(e.viewTablePost,"pageSize",t)},handleCurrentpage:e.getAsyncList}})],1)},i=[],n=a("c7eb"),r=a("1da1"),o=a("71da"),c={name:"LOGINLOG",data:function(){return{viewTablePost:{currentPage:1,pageSize:15,type:2,time:""},viewTableData:{data:[],total:0,isLoading:!1,selection:!0,style:"min-height:500px;",column:[{label:"账号",prop:"account"},{label:"姓名",prop:"name"},{label:"操作",prop:"action"},{label:"IP",prop:"ip"},{label:"访问时间",prop:"createTime"}]},tableSelection:[]}},created:function(){this.getAsyncList()},methods:{getAsyncList:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.viewTableData.isLoading=!0,t.next=3,Object(o["a"])(e.viewTablePost);case 3:a=t.sent,200==a.code&&a.data?(e.viewTableData.data=a.data.obj,e.viewTableData.total=a.data.total):(e.viewTableData.data=[],e.viewTableData.total=0),e.viewTableData.isLoading=!1;case 6:case"end":return t.stop()}}),t)})))()},handleSelectionChange:function(e){this.tableSelection=e},deleteBtn:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function a(){var s,i;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=e.id,a.next=3,deletebackupdata({id:s});case 3:i=a.sent,200==i.code?(t.$message({message:"删除成功",type:"success"}),t.getAsyncList()):t.$message({message:"删除失败!",type:"warning"});case 5:case"end":return a.stop()}}),a)})))()}}},l=c,u=a("2877"),d=Object(u["a"])(l,s,i,!1,null,null,null);t["default"]=d.exports},"71da":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var s=a("b775");function i(e){return Object(s["a"])({url:"/admin/operation/log/list",method:"post",data:e})}},"7f60":function(e,t,a){},"852b":function(e,t,a){},"87e0":function(e,t,a){},"8d8c":function(e,t,a){"use strict";a("2985")},9208:function(e,t,a){"use strict";a("1342")},"96b1":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"flexBox"},[a("div",{staticClass:"flex",staticStyle:{"flex-wrap":"wrap","align-items":"baseline"}},[a("span",{staticClass:"p-r-10",staticStyle:{"line-height":"28px"}},[e._v("测绘配置")]),a("el-radio-group",{staticClass:"m-l-10",attrs:{size:"mini"},model:{value:e.currentType,callback:function(t){e.currentType=t},expression:"currentType"}},[a("el-radio",{attrs:{label:!1}},[e._v("多网段")]),a("el-radio",{attrs:{label:!0}},[e._v("单网段")])],1),a("span",{staticClass:"fz12 m-l-10 p-l-10"},[e._v("(如果单位网络划分了vlan,请选择多网段测绘; 如果单位网络未划分vlan,则选择单网段测绘。)")])],1),a("div",{staticClass:"flex"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.currentType,expression:"!currentType"}],attrs:{size:"small",type:"primary"},on:{click:e.addBtn}},[e._v("新增")]),a("el-button",{attrs:{size:"small",type:"info"},on:{click:function(t){return e.$router.push({path:"/"})}}},[e._v("返回首页")])],1)])]},proxy:!0}])},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.currentType,expression:"!currentType"}]},[a("el-empty",{directives:[{name:"show",rawName:"v-show",value:!e.formArr.length,expression:"!formArr.length"}],attrs:{description:"暂无数据..."}}),a("div",{staticClass:"fromWrap"},e._l(e.formArr,(function(t,s){return a("el-form",{key:s,ref:"formItem"+s,refInFor:!0,staticClass:"formItemEle m-b-10 p-b-10",attrs:{model:t,rules:e.rules,"label-position":"top",size:"mini"}},[a("div",{staticClass:"flex between wrap",staticStyle:{"align-items":"self-end"}},[a("el-col",{staticClass:"inputWrap",attrs:{md:18,lg:20}},[a("el-form-item",{attrs:{label:s+1+"# 设备名称",prop:"name"}},[a("el-input",{model:{value:t.name,callback:function(a){e.$set(t,"name","string"===typeof a?a.trim():a)},expression:"formItem.name"}})],1),a("el-form-item",{attrs:{label:"设备类型",prop:"deviceTypeId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.deviceTypeId,callback:function(a){e.$set(t,"deviceTypeId","string"===typeof a?a.trim():a)},expression:"formItem.deviceTypeId"}},e._l(e.deviceTypeArr,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1),a("el-form-item",{attrs:{label:"品牌",prop:"deviceVendorId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.deviceVendorId,callback:function(a){e.$set(t,"deviceVendorId","string"===typeof a?a.trim():a)},expression:"formItem.deviceVendorId"}},e._l(e.deviceVendorArr,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1),a("el-form-item",{attrs:{label:"管理IP",prop:"ip"}},[a("el-input",{model:{value:t.ip,callback:function(a){e.$set(t,"ip","string"===typeof a?a.trim():a)},expression:"formItem.ip"}})],1),a("el-form-item",{attrs:{label:"登陆方式",prop:"loginType"}},[a("el-select",{on:{change:function(a){return e.loginTypeChange(t)}},model:{value:t.loginType,callback:function(a){e.$set(t,"loginType","string"===typeof a?a.trim():a)},expression:"formItem.loginType"}},[a("el-option",{attrs:{value:"ssh"}},[e._v("ssh")]),a("el-option",{attrs:{value:"telnet"}},[e._v("telnet")])],1)],1),a("el-form-item",{attrs:{label:"端口"}},[a("el-input",{attrs:{placeholder:"ssh"===t.loginType?"22":"23"},model:{value:t.loginPort,callback:function(a){e.$set(t,"loginPort","string"===typeof a?a.trim():a)},expression:"formItem.loginPort"}})],1),a("el-form-item",{attrs:{label:"用户名",prop:"loginName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.loginName,callback:function(a){e.$set(t,"loginName","string"===typeof a?a.trim():a)},expression:"formItem.loginName"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"loginPassword"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:t.loginPassword,callback:function(a){e.$set(t,"loginPassword","string"===typeof a?a.trim():a)},expression:"formItem.loginPassword"}})],1)],1),a("div",[a("p",{staticClass:"textTips fz14",staticStyle:{"margin-bottom":"4px"}},[1===t.testFlag?a("span",{staticClass:"successC"},[e._v("登录正常")]):e._e(),0===t.testFlag?a("span",{staticClass:"dangerC"},[e._v("登录失败")]):e._e()]),a("div",[a("el-button",{attrs:{plain:"",size:"mini",type:"primary",disabled:t.testLoading},on:{click:function(a){return e.testBtn(t,s)}}},[a("i",{directives:[{name:"show",rawName:"v-show",value:t.testLoading,expression:"formItem.testLoading"}],staticClass:"el-icon-loading"}),e._v(" 测试")]),a("el-button",{attrs:{plain:"",size:"mini",type:"danger"},on:{click:function(a){return e.delRow(t,s)}}},[e._v("删除")])],1)])],1)])})),1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.formArr.length,expression:"formArr.length"}],staticClass:"flexCC p-t-10"},[a("el-button",{attrs:{type:"success"},on:{click:e.saveBtn}},[e._v("保存配置")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.currentType,expression:"currentType"}],staticClass:"p10"},[a("p",{staticClass:"m-b-10"},[e._v("请输入单位网段：")]),a("el-form",{ref:"workSegmentForm",attrs:{model:e.workSegmentForm,rules:e.workSegmentRules,size:"mini"}},[a("el-row",{attrs:{gutter:10}},[a("el-form-item",{attrs:{prop:"ip"}},[a("el-input",{attrs:{placeholder:"例:192.168.6.0"},model:{value:e.workSegmentForm.ip,callback:function(t){e.$set(e.workSegmentForm,"ip","string"===typeof t?t.trim():t)},expression:"workSegmentForm.ip"}})],1),a("el-form-item",{staticClass:"m-l-10 m-r-10",attrs:{prop:"mask"}},[a("el-input",{staticStyle:{width:"80px"},attrs:{placeholder:"例:24"},model:{value:e.workSegmentForm.mask,callback:function(t){e.$set(e.workSegmentForm,"mask","string"===typeof t?t.trim():t)},expression:"workSegmentForm.mask"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.saveSingle}},[e._v("保 存")])],1)],1)],1)],1)]),a("hand",{staticClass:"m-t-10",attrs:{isSingle:e.currentType,singleForm:e.workSegmentForm}})],1)},i=[],n=a("5530"),r=a("c7eb"),o=a("1da1"),c=(a("d81d"),a("d3b7"),a("159b"),a("a9e3"),a("a434"),a("da71")),l=a("24b4"),u=a("3bb4"),d={components:{hand:u["default"]},data:function(){return{currentType:null,isLoading:!0,formArr:[{name:"",deviceTypeId:"",deviceVendorId:"",deviceModelId:"",ip:"",loginType:"ssh",loginPort:"",loginName:"",loginPassword:"",testLoading:!1,testFlag:null}],rules:{name:[{required:!0,message:"请输入设备名称",trigger:"blur"}],deviceTypeId:[{required:!0,message:"请输入设备类型",trigger:"blur"}],deviceVendorId:[{required:!0,message:"请输入品牌",trigger:"blur"}],ip:[{required:!0,message:"请输入管理IP",trigger:"blur"}],loginType:[{required:!0,message:"请选择登陆方式",trigger:"blur"}],loginName:[{required:!0,message:"请输入用户名",trigger:"blur"}],loginPassword:[{required:!0,message:"请输入密码",trigger:"blur"}]},deviceTypeArr:[],deviceVendorArr:[],workSegmentForm:{ip:"",mask:""},workSegmentRules:{ip:[{required:!0,message:"请输入网段IP地址",trigger:"blur"}],mask:[{required:!0,message:"请输入掩码",trigger:"blur"}]}}},created:function(){this.getNetworkSegmentFn(),this.getList()},methods:{getNetworkSegmentFn:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){var a,s;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,Object(c["c"])();case 3:return a=t.sent,200==a.code&&a.data&&(e.workSegmentForm=a.data),t.next=7,Object(l["e"])();case 7:s=t.sent,200==s.code&&s.data&&s.data.type&&(e.currentType="2"==s.data.type),e.isLoading=!1;case 10:case"end":return t.stop()}}),t)})))()},saveSingle:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.workSegmentForm.validate(function(){var t=Object(o["a"])(Object(r["a"])().mark((function t(a){var s;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=5;break}return t.next=3,Object(c["f"])(Object(n["a"])(Object(n["a"])({},e.workSegmentForm),{},{checked:!0}));case 3:s=t.sent,200===s.code&&e.$message({message:"保存成功",type:"success"});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},delSingle:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["b"])({id:e.workSegmentForm.id});case 2:a=t.sent,200==a.code&&(e.$message({message:"删除成功",type:"success"}),e.getNetworkSegmentFn());case 4:case"end":return t.stop()}}),t)})))()},addBtn:function(){this.formArr.push({id:"",name:"",deviceTypeId:"",deviceVendorId:"",deviceModelId:"",ip:"",loginType:"ssh",loginPort:"",loginName:"",loginPassword:"",testLoading:!1,testFlag:null})},getList:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){var a,s,i,n;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["d"])({currentPage:1,pageSize:999});case 2:a=t.sent,200===a.code&&a.data&&(s=a.data,i=s.obj,n=s.other,e.formArr=i.map((function(e){return e.testLoading=!1,e.testFlag=null,e})),n&&(e.deviceTypeArr=n.deviceType,e.deviceVendorArr=n.deviceVendor));case 4:case"end":return t.stop()}}),t)})))()},loginTypeChange:function(e){var t="";"ssh"===e.loginType?t="22":"telnet"===e.loginType?t="23":"api"===e.loginType&&(t="10443"),e.loginPort=t},saveBtn:function(){for(var e=!0,t=0;t<this.formArr.length;t++){var a=this.formArr[t];delete a.createTime,this.$refs["formItem"+t][0].validate(function(){var t=Object(o["a"])(Object(r["a"])().mark((function t(a){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:a||(e=!1);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}e&&this.saveFn()},saveFn:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){var a,s,i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object.assign([],e.formArr),a.forEach((function(e){e.loginPort||(e.loginPort="ssh"===e.loginType?"22":"23")})),t.next=4,Object(c["e"])(a);case 4:return s=t.sent,200===s.code?(e.$message.success("保存成功"),e.getList()):e.$message.error(s.msg),i={checked:!1},e.workSegmentForm.id&&(i.id=e.workSegmentForm.id),t.next=10,Object(c["f"])(i);case 10:case"end":return t.stop()}}),t)})))()},testBtn:function(e,t){var a=this;return Object(o["a"])(Object(r["a"])().mark((function s(){var i;return Object(r["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e.id){s.next=2;break}return s.abrupt("return",a.$message.error("请先保存"));case 2:return e.testLoading=!0,a.formArr[t].testFlag=null,s.next=6,Object(c["g"])({id:e.id});case 6:i=s.sent,200===i.code?a.formArr[t].testFlag=Number(i.data):a.$message.error(i.msg),e.testLoading=!1;case 9:case"end":return s.stop()}}),s)})))()},delRow:function(e,t){var a=this;return Object(o["a"])(Object(r["a"])().mark((function s(){var i;return Object(r["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!e.id){s.next=7;break}return s.next=3,Object(c["a"])({ids:e.id});case 3:i=s.sent,200===i.code?(a.$message.success("删除成功"),a.getList()):a.$message.error(i.msg),s.next=8;break;case 7:a.formArr.splice(t,1);case 8:case"end":return s.stop()}}),s)})))()}}},p=d,m=(a("404a"),a("2877")),f=Object(m["a"])(p,s,i,!1,null,"1ccc08a2",null);t["default"]=f.exports},"9ed6":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-container"},[a("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,autocomplete:"on","label-position":"left"}},[a("div",{staticClass:"borderLineX"}),a("div",{staticClass:"borderLineX",staticStyle:{right:"-2px",left:"auto"}}),a("div",{staticClass:"borderLineX",staticStyle:{bottom:"-2px",top:"auto"}}),a("div",{staticClass:"borderLineX",staticStyle:{right:"-2px",bottom:"-2px",left:"auto",top:"auto"}}),a("div",{staticClass:"borderLineY"}),a("div",{staticClass:"borderLineY",staticStyle:{right:"-2px",left:"auto"}}),a("div",{staticClass:"borderLineY",staticStyle:{bottom:"-2px",top:"auto"}}),a("div",{staticClass:"borderLineY",staticStyle:{right:"-2px",bottom:"-2px",left:"auto",top:"auto"}}),a("div",{staticClass:"title-container"},[a("h3",{staticClass:"title"},[e._v("网络测绘系统")])]),a("el-form-item",{attrs:{prop:"username"}},[a("span",{staticClass:"svg-container"},[a("svg-icon",{attrs:{"icon-class":"user"}})],1),a("el-input",{ref:"username",attrs:{placeholder:"账号",name:"username",type:"text",tabindex:"1",autocomplete:"on"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),a("el-tooltip",{attrs:{content:"大写锁定已开启",placement:"right",manual:""},model:{value:e.capsTooltip,callback:function(t){e.capsTooltip=t},expression:"capsTooltip"}},[a("el-form-item",{attrs:{prop:"password"}},[a("span",{staticClass:"svg-container"},[a("svg-icon",{attrs:{"icon-class":"password"}})],1),a("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"密码",name:"password",tabindex:"2",autocomplete:"on"},on:{blur:function(t){e.capsTooltip=!1}},nativeOn:{keyup:[function(t){return e.checkCapslock(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}]},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),a("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[a("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1)],1),a("el-form-item",{attrs:{prop:"captcha"}},[a("span",{staticClass:"svg-container"},[a("i",{staticClass:"el-icon-picture"})]),a("el-input",{ref:"captcha",staticClass:"hb-input-captcha",attrs:{placeholder:"验证码",name:"captcha",type:"text",tabindex:"3"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.captcha,callback:function(t){e.$set(e.loginForm,"captcha",t)},expression:"loginForm.captcha"}}),a("img",{staticClass:"hb-captcha",attrs:{src:e.captcha,width:"100",height:"50"},on:{click:e.editCaptcha}})],1),a("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"center"}},[a("el-button",{attrs:{id:"loginBtn",loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v("登录")])],1)],1)],1)},i=[],n=a("c7eb"),r=a("1da1"),o=(a("13d5"),a("d3b7"),a("b64b"),{name:"Login",data:function(){return{loginForm:{username:"",password:"",captcha:""},loginRules:{username:[{required:!0,trigger:"blur",message:"用户名不能为空"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:20,message:"密码长度6-20位"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}]},captcha:"",passwordType:"password",capsTooltip:!1,loading:!1,showDialog:!1,redirect:void 0,otherQuery:{}}},watch:{$route:{handler:function(e){var t=e.query;t&&(this.redirect=t.redirect,this.otherQuery=this.getOtherQuery(t))},immediate:!0}},created:function(){this.editCaptcha()},mounted:function(){""===this.loginForm.username?this.$refs.username.focus():""===this.loginForm.password&&this.$refs.password.focus()},methods:{editCaptcha:function(){var e="/admin/captcha?"+Math.random();this.captcha=e},checkCapslock:function(e){var t=e.key;this.capsTooltip=t&&1===t.length&&t>="A"&&t<="Z"},keyup_handleLogin:function(e){13===e.keyCode&&0==this.loading&&this.handleLogin()},showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},handleLogin:function(){var e=this;this.loading||this.$refs.loginForm.validate(function(){var t=Object(r["a"])(Object(n["a"])().mark((function t(a){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:a&&(e.loading=!0,e.$store.dispatch("user/login",e.loginForm).then((function(t){200==t.code?e.$router.push({path:"/",query:e.otherQuery}):e.$message({message:t.msg,type:"error"}),setTimeout((function(){e.loading=!1}),1e3)})).catch((function(t){console.log(t),e.$message({message:t,type:"error"}),setTimeout((function(){e.loading=!1}),2e3)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getOtherQuery:function(e){return Object.keys(e).reduce((function(t,a){return"redirect"!==a&&(t[a]=e[a]),t}),{})}}}),c=o,l=(a("5cdf"),a("9208"),a("2877")),u=Object(l["a"])(c,s,i,!1,null,"96ed1686",null);t["default"]=u.exports},a1ba:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},i=[],n={created:function(){this.b=b}},r=n,o=a("2877"),c=Object(o["a"])(r,s,i,!1,null,null,null);t["default"]=c.exports},a36b:function(e,t,a){e.exports=a.p+"static/img/404.a57b6f31.png"},a8c4:function(e,t,a){var s={"./views/empower":"2f54","./views/empower/":"2f54","./views/empower/index":"2f54","./views/empower/index.vue":"2f54","./views/error-log":"c273","./views/error-log/":"c273","./views/error-log/components/ErrorTestA":"ce2f","./views/error-log/components/ErrorTestA.vue":"ce2f","./views/error-log/components/ErrorTestB":"a1ba","./views/error-log/components/ErrorTestB.vue":"a1ba","./views/error-log/index":"c273","./views/error-log/index.vue":"c273","./views/error-page/401":"24e2","./views/error-page/401.vue":"24e2","./views/error-page/404":"1db4","./views/error-page/404.vue":"1db4","./views/index":"37f9","./views/index/":"37f9","./views/index/index":"37f9","./views/index/index.vue":"37f9","./views/log/action":"e64c","./views/log/action.vue":"e64c","./views/log/login":"6ef2","./views/log/login.vue":"6ef2","./views/log/view":"dab7","./views/log/view.vue":"dab7","./views/login":"9ed6","./views/login/":"9ed6","./views/login/auth-redirect":"b829","./views/login/auth-redirect.vue":"b829","./views/login/components/SocialSignin":"c62e","./views/login/components/SocialSignin.vue":"c62e","./views/login/index":"9ed6","./views/login/index.vue":"9ed6","./views/permission/menu":"0ae1","./views/permission/menu.vue":"0ae1","./views/permission/role":"d78e","./views/permission/role.vue":"d78e","./views/surveying":"703a","./views/surveying/":"703a","./views/surveying/hand":"3bb4","./views/surveying/hand.vue":"3bb4","./views/surveying/hand1":"b4bb","./views/surveying/hand1.vue":"b4bb","./views/surveying/index":"703a","./views/surveying/index.vue":"703a","./views/surveying/index1":"96b1","./views/surveying/index1.vue":"96b1","./views/surveying/log":"c0b4","./views/surveying/log.vue":"c0b4","./views/system/backup":"1575","./views/system/backup.vue":"1575","./views/system/empower":"f3f7","./views/system/empower.vue":"f3f7","./views/system/user":"b979","./views/system/user.vue":"b979","./views/user":"e382","./views/user/":"e382","./views/user/index":"e382","./views/user/index.vue":"e382"};function i(e){var t=n(e);return a(t)}function n(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}i.keys=function(){return Object.keys(s)},i.resolve=n,e.exports=i,i.id="a8c4"},b4bb:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.startLoading,expression:"startLoading"}],scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"flexBox"},[a("div",[e._v(" 测绘日志 "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.isRunning,expression:"isRunning"}],staticClass:"fz12 m-l-10",staticStyle:{color:"#aaa"}},[e._v("正在进行"+e._s(2==e.currentType?"单":1==e.currentType?"多":"")+"网段测绘...")]),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.isRunning&&e.currentType,expression:"!isRunning && currentType"}],staticClass:"fz12 m-l-10",staticStyle:{color:"#aaa"}},[e._v("("+e._s(2==e.currentType?"单":1==e.currentType?"多":"")+"网段)")])]),a("div",{},[a("el-button",{attrs:{size:"small",type:"primary",disabled:e.isRunning},on:{click:e.handBtn}},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.isRunning,expression:"isRunning"}]},[a("i",{staticClass:"el-icon-loading"}),e._v(" 测绘中...")]),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.isRunning,expression:"!isRunning"}]},[e._v("开始测绘")])]),a("el-button",{attrs:{size:"small",type:"success"},on:{click:function(t){e.viewDialogFlag=!0}}},[e._v("测绘结果")])],1)])]},proxy:!0}])},[a("div",{staticClass:"logWrap fz12 p10"},[e._l(e.logList,(function(t){return a("div",{key:t.id,staticClass:"logItem flexBox"},[a("div",{staticClass:"logContent"},[a("div",{staticClass:"logMsg"},[a("p",[e._v(e._s(t.name))]),a("div",{staticClass:"time"},[a("span",[e._v(e._s(t.beginTime))]),e._v(" ~ "),a("span",[a("span",{directives:[{name:"show",rawName:"v-show",value:1===t.status,expression:"item.status === 1"}],staticClass:"successC"},[a("i",{staticClass:"el-icon-loading"}),a("span",{staticClass:"fz12"},[e._v(e._s("数据上传"===t.name?"数据上传中...":"分析中..."))])]),e._v(" "+e._s(t.endTime)+" ")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:2===t.status,expression:"item.status === 2"}],staticClass:"dot green"},[e._v("成功")]),a("div",{directives:[{name:"show",rawName:"v-show",value:3===t.status,expression:"item.status === 3"}],staticClass:"dot red"},[e._v("失败")])]),a("div",{staticClass:"actions"})])})),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isRunning&&e.logList.length,expression:"!isRunning && logList.length"}],staticClass:"logItem flexBox"},[a("div",{staticClass:"logContent"},[a("div",{staticClass:"logMsg"},[a("p",[e._v("测绘完成")])])])])],2)]),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"测绘结果","custom-class":"mw600 smTank",visible:e.viewDialogFlag,width:"80%",top:"10%"},on:{"update:visible":function(t){e.viewDialogFlag=t},open:e.getAsyncList}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.detailIsLoading,expression:"detailIsLoading"}]},[a("fieldset",{staticClass:"m-b-10"},[a("legend",[e._v("IPv4网段统计")]),a("el-tree",{attrs:{"default-expand-all":!0,data:e.rowDetail.subme_ipv4,props:e.defaultProps},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data;return a("span",{staticClass:"fz12"},[a("span",[e._v(e._s(s.ip+"/"+s.mask))])])}}])})],1),a("fieldset",{staticClass:"m-b-10"},[a("legend",[e._v("IPv6网段统计")]),a("el-tree",{attrs:{"default-expand-all":!0,data:e.rowDetail.subme_ipv6,props:e.defaultProps},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data;return a("span",{staticClass:"fz12"},[a("span",[e._v(e._s(s.ip+"/"+s.mask))])])}}])})],1),a("fieldset",{staticClass:"m-b-10"},[a("legend",[e._v("终端统计")]),a("el-descriptions",{staticClass:"fz12",attrs:{column:1}},[a("el-descriptions-item",{attrs:{label:"IPv4终端"}},[e._v(e._s(e.rowDetail.ipv4))]),a("el-descriptions-item",{attrs:{label:"IPv4/IPv6终端"}},[e._v(e._s(e.rowDetail.ipv4_ipv6))])],1)],1)])])],1)},i=[],n=a("c7eb"),r=a("1da1"),o=a("24b4"),c=a("ae6f"),l={props:{isSingle:{type:Boolean,default:function(){return!1}},singleForm:{type:Object,default:function(){return{ip:"",mask:""}}}},data:function(){return{isRunning:!1,currentType:0,viewTablePost:{currentPage:1,pageSize:15},startLoading:!1,logTimer:null,logList:[],viewDialogFlag:!1,defaultProps:{children:"subnetList",label:"ip"},detailIsLoading:!1,rowDetail:{ipv4:0,ipv4_ipv6:0,subme_ipv4:[],subme_ipv6:[],gatewayInfo:[]}}},mounted:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getCaiJiStatus(),e.getAsyncList();case 2:case"end":return t.stop()}}),t)})))()},methods:{getCaiJiStatus:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a,s,i;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["e"])();case 2:return a=t.sent,200==a.code&&a.data&&a.data.type&&(e.currentType=a.data.type),t.next=6,Object(o["g"])({type:1});case 6:if(s=t.sent,200!==s.code){t.next=14;break}if(1001!==s.data){t.next=14;break}return t.next=11,Object(o["b"])();case 11:i=t.sent,200==i.code&&i.data&&(e.logList=i.data.data),e.isRunning=!1;case 14:1002===s.code&&(e.isRunning=!0,e.getLogFn());case 15:case"end":return t.stop()}}),t)})))()},getLogFn:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1!=e.currentType){t.next=4;break}return t.next=3,Object(o["b"])();case 3:a=t.sent;case 4:if(2!=e.currentType){t.next=8;break}return t.next=7,Object(o["c"])();case 7:a=t.sent;case 8:if(200!=a.code||!a.data){t.next=17;break}if(e.logList=a.data.data,!a.data.finish){t.next=15;break}return e.isRunning=!1,t.abrupt("return");case 15:e.logTimer&&clearTimeout(e.logTimer),e.logTimer=setTimeout((function(){e.getLogFn()}),2e3);case 17:case"end":return t.stop()}}),t)})))()},handBtn:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a,s,i,r,c;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a={},s=e.singleForm,i=s.ip,r=s.mask,!e.isSingle){t.next=7;break}if(a.ip=i,a.mask=r,i&&r){t.next=7;break}return t.abrupt("return",e.$message.error("请先保存网段IP地址、掩码"));case 7:return e.startLoading=!0,setTimeout((function(){e.getCaiJiStatus(),e.startLoading=!1}),1e3),t.next=11,Object(o["g"])(a);case 11:if(c=t.sent,400!=c.code){t.next=14;break}return t.abrupt("return",e.$message({message:"正在采集中... 请勿重复提交",type:"warning"}));case 14:case"end":return t.stop()}}),t)})))()},getStatusInfo:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["d"])();case 2:a=t.sent,200==a.code?e.isRunning=1===a.data.semaphore:e.isRunning=!1;case 4:case"end":return t.stop()}}),t)})))()},getAsyncList:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a,s,i;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.detailIsLoading=!0,t.next=3,Object(c["a"])(e.viewTablePost);case 3:a=t.sent,200==a.code&&a.data&&(s=a.data.obj[0]||{},i=s.details&&"string"===typeof s.details?JSON.parse(s.details):{},e.rowDetail.ipv4=i.ipv4,e.rowDetail.ipv4_ipv6=i.ipv4_ipv6,e.rowDetail.subme_ipv4=i.subme_ipv4&&"string"===typeof i.subme_ipv4?JSON.parse(i.subme_ipv4):[],e.rowDetail.subme_ipv6=i.subme_ipv6&&"string"===typeof i.subme_ipv6?JSON.parse(i.subme_ipv6):[],e.rowDetail.gatewayInfo=i.gatewayInfo),e.detailIsLoading=!1;case 6:case"end":return t.stop()}}),t)})))()}}},u=l,d=(a("bb07"),a("2877")),p=Object(d["a"])(u,s,i,!1,null,"6492526a",null);t["default"]=p.exports},b829:function(e,t,a){"use strict";a.r(t);a("fb6a"),a("ac1f"),a("841c");var s,i,n={name:"AuthRedirect",created:function(){var e=window.location.search.slice(1);window.localStorage&&(window.localStorage.setItem("x-admin-oauth-code",e),window.close())},render:function(e){return e()}},r=n,o=a("2877"),c=Object(o["a"])(r,s,i,!1,null,null,null);t["default"]=c.exports},b979:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container",staticStyle:{"max-width":"1400px"}},[a("div",{staticClass:"flexBox p-b-10"},[a("el-button-group",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleAdd}},[e._v("添加用户")]),a("el-button",{attrs:{disabled:!e.tableSelectArr.length,type:"primary",size:"mini"},on:{click:function(t){return e.lockedBtn()}}},[e._v("批量禁用/启用")])],1),a("div",[a("el-select",{attrs:{placeholder:"用户状态",size:"mini"},on:{change:e.userStatusChange},model:{value:e.postData.status,callback:function(t){e.$set(e.postData,"status",t)},expression:"postData.status"}},[a("el-option",{key:0,attrs:{label:"正常用户",value:0}}),a("el-option",{key:1,attrs:{label:"已禁用",value:1}})],1)],1)],1),a("viewTable",{attrs:{"table-data":e.tableData},on:{tabSelect:e.onTabSelect,emitDdit:e.onRowEdit,emitDel:e.onRowDel}}),a("Pagination",{ref:"pagain",attrs:{"current-page":e.postData.currentPage,pageSize:e.postData.pageSize,total:e.tableData.total},on:{"update:currentPage":function(t){return e.$set(e.postData,"currentPage",t)},"update:current-page":function(t){return e.$set(e.postData,"currentPage",t)},"update:pageSize":function(t){return e.$set(e.postData,"pageSize",t)},"update:page-size":function(t){return e.$set(e.postData,"pageSize",t)},handleCurrentpage:e.getUserList}}),a("el-dialog",{attrs:{width:"600px",title:"用户管理",visible:e.dialogFormVisible,"close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.close}},[a("el-form",{ref:"editForm",attrs:{"label-width":"100px",model:e.editForm,rules:e.rules,size:"mini"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入用户名",autocomplete:"off"},model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,"username",t)},expression:"editForm.username"}})],1),a("el-form-item",{attrs:{label:e.editForm.id?"重置密码":"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.editForm.password,callback:function(t){e.$set(e.editForm,"password",t)},expression:"editForm.password"}})],1),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.editForm.checkPass,callback:function(t){e.$set(e.editForm,"checkPass",t)},expression:"editForm.checkPass"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"norepeat",rawName:"v-norepeat"}],attrs:{size:"mini",type:"primary"},on:{click:e.submitFrom}},[e._v("确 定")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")])],1)],1)],1)},i=[],n=a("c7eb"),r=a("1da1"),o=(a("a15b"),a("d81d"),a("c24f")),c={name:"Users",data:function(){var e=this,t=function(e,t,a){t&&(t.length<6||t.length>20)&&a(new Error("密码长度为6~20个字符")),a()},a=function(t,a,s){a?a!==e.editForm.password&&s(new Error("两次输入密码不一致!")):s(),s()};return{postData:{currentPage:1,pageSize:10,status:0,type:0},tableData:{selection:!0,isLoading:!1,data:[],total:0,column:[{label:"序号",width:50},{label:"用户名",prop:"username"},{label:"角色权限",prop:"userRole"},{label:"操作",width:100,actionBtn:[{emit:"emitDdit",icon:"el-icon-edit"},{emit:"emitDel",icon:"el-icon-delete"}]}]},dialogFormVisible:!1,editForm:{username:"",password:"",checkPass:"",selectRoles:[]},rules:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,validator:t,trigger:"blur"}],checkPass:[{required:!0,validator:a,trigger:"blur"}]},tableSelectArr:[]}},mounted:function(){this.getUserList()},methods:{getUserList:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tableData.isLoading=!0,e.tableData.data=[],t.next=4,Object(o["d"])(e.postData);case 4:a=t.sent,200==a.code&&a.data?(e.tableData.data=a.data.obj,e.tableData.total=a.data.total):e.tableData.total=0,e.tableData.isLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},userStatusChange:function(e){this.postData.currentPage=1,this.getUserList()},onRowEdit:function(e){var t=this;this.rules.password[0].required=!1,this.rules.checkPass[0].required=!1,Object(o["j"])({id:e.id}).then((function(e){if(200==e.code&&e.data){var a=e.data.obj;t.editForm={id:a.id,username:a.username,password:"",checkPass:"",roleList:e.data.roleList||[],selectRoles:a.roleIds},t.dialogFormVisible=!0}}))},handleAdd:function(){var e=this;this.rules.password[0].required=!0,this.rules.checkPass[0].required=!0,Object(o["a"])().then((function(t){200==t.code&&(e.editForm.roleList=t.data?t.data.roleList:[],e.editForm.selectRoles=[],e.editForm.groupId=1,e.dialogFormVisible=!0)}))},submitFrom:function(){var e=this;this.$refs.editForm.validate((function(t){if(t){var a=e.editForm,s={username:a.username,password:a.password||"",verifyPassword:a.checkPass||""};e.editForm.id&&(s.id=String(e.editForm.id)),e.tankLoading=!0,Object(o["i"])(s).then((function(t){200==t.code?(e.$message({message:"保存成功!",type:"success"}),e.dialogFormVisible=!1,e.getUserList()):e.$message({message:t.msg||"保存失败",type:"error"}),e.tankLoading=!1})).catch((function(t){console.log(t),e.tankLoading=!1}))}}))},lockedBtn:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function a(){var s,i,r;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s="",i="",e&&e.id?(s=e.id,i=1==e.status?0:1):t.tableSelectArr.length&&(s=t.tableSelectArr.map((function(e){return e.id})).join(),i=1==t.tableSelectArr[0].status?0:1),a.next=5,Object(o["k"])({id:s,status:i});case 5:r=a.sent,200==r.code&&(1==i&&t.$message.success("用户已被禁用"),0==i&&t.$message.success("用户已启用"),t.getUserList());case 7:case"end":return a.stop()}}),a)})))()},onRowDel:function(e){var t=this;this.$confirm("将要删除用户"+e.username+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(Object(n["a"])().mark((function a(){var s;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(o["b"])({id:e.id});case 2:s=a.sent,200==s.code?(t.$message({title:"成功",message:"删除成功",type:"success"}),t.getUserList()):t.$message({message:"删除失败",type:"error"});case 4:case"end":return a.stop()}}),a)})))).catch((function(){}))},onTabSelect:function(e){this.tableSelectArr=e},allocationGroupBtn:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.tableSelectArr.length||e.$message.warning("请先选中用户");case 1:case"end":return t.stop()}}),t)})))()},close:function(){this.editForm={username:"",password:"",checkPass:"",selectRoles:[]}}}},l=c,u=a("2877"),d=Object(u["a"])(l,s,i,!1,null,null,null);t["default"]=d.exports},bb07:function(e,t,a){"use strict";a("3925")},bfec:function(e,t,a){"use strict";a("87e0")},c0b4:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"clearfix"},[a("span",{staticStyle:{"line-height":"28px"}},[e._v("测绘日志")]),a("div",{staticClass:"fr"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.$route.query.type,expression:"$route.query.type == 1"}],attrs:{size:"small",type:"primary"},on:{click:e.getAsyncList}},[e._v("开始测绘")]),a("el-button",{attrs:{size:"small",type:"info"},on:{click:function(t){return e.$router.push({path:"/"})}}},[e._v("返回首页")])],1)])]},proxy:!0}])},[a("viewTable",{attrs:{"table-data":e.viewTableData},on:{viewBtn:e.viewBtn}}),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"测绘结果","custom-class":"mw600 smTank",visible:e.viewDialogFlag,width:"80%",top:"10%"},on:{"update:visible":function(t){e.viewDialogFlag=t}}},[a("fieldset",{staticClass:"m-b-10"},[a("legend",[e._v("IPv4网段统计")]),a("el-tree",{attrs:{"default-expand-all":!0,data:e.rowDetail.subme_ipv4,props:e.defaultProps},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data;return a("span",{staticClass:"fz12"},[a("span",[e._v(e._s(s.ip+"/"+s.mask))])])}}])})],1),a("fieldset",{staticClass:"m-b-10"},[a("legend",[e._v("IPv6网段统计")]),a("el-tree",{attrs:{"default-expand-all":!0,data:e.rowDetail.subme_ipv6,props:e.defaultProps},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data;return a("span",{staticClass:"fz12"},[a("span",[e._v(e._s(s.ip+"/"+s.mask))])])}}])})],1),a("fieldset",{staticClass:"m-b-10"},[a("legend",[e._v("互联网出口统计")]),a("el-descriptions",{attrs:{column:1}},e._l(e.rowDetail.gatewayInfo,(function(t,s){return a("el-descriptions-item",{key:t.id,staticClass:"fz12",attrs:{label:"出口"+(1+s)}},[a("div",{staticClass:"flex",staticStyle:{gap:"10px"}},[a("div",[e._v(e._s(t.operator))]),a("div",[a("p",[e._v("("+e._s(t.ip_address)+")")]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.ipv6_address,expression:"item.ipv6_address"}]},[e._v("("+e._s(t.ipv6_address+"/"+t.ipv6_subnet)+")")])]),a("div",[e._v(e._s(t.port))])])])})),1)],1),a("fieldset",{staticClass:"m-b-10"},[a("legend",[e._v("终端统计")]),a("el-descriptions",{staticClass:"fz12",attrs:{column:1}},[a("el-descriptions-item",{attrs:{label:"IPv4终端"}},[e._v(e._s(e.rowDetail.ipv4))]),a("el-descriptions-item",{attrs:{label:"IPv4/IPv6终端"}},[e._v(e._s(e.rowDetail.ipv4_ipv6))])],1)],1)])],1)},i=[],n=a("c7eb"),r=a("1da1"),o=a("ae6f"),c={data:function(){return{isLoading:!1,viewTablePost:{currentPage:1,pageSize:15},viewTableData:{data:[],total:0,isLoading:!1,selection:!1,style:"min-height:500px;",column:[{label:"日期",prop:"createTime",propFilter:function(e){return e?e.split(" ")[0]:""}},{label:"开始时间",prop:"beginTime"},{label:"结束时间",prop:"endTime"},{label:"方式",prop:"type"},{label:"结果",prop:"result",render:function(e,t){return e("div",{class:"成功"==t.result?"successC":"dangerC",domProps:{innerHTML:t.result}})}},{label:"操作",actionBtn:[{text:"查看",emit:"viewBtn"}]}]},viewDialogFlag:!1,defaultProps:{children:"subnetList",label:"ip"},rowDetail:{ipv4:0,ipv4_ipv6:0,subme_ipv4:[],subme_ipv6:[],gatewayInfo:[]}}},mounted:function(){this.getAsyncList()},methods:{viewBtn:function(e){var t=e.details&&"string"===typeof e.details?JSON.parse(e.details):{};this.rowDetail.ipv4=t.ipv4,this.rowDetail.ipv4_ipv6=t.ipv4_ipv6,this.rowDetail.subme_ipv4=t.subme_ipv4&&"string"===typeof t.subme_ipv4?JSON.parse(t.subme_ipv4):[],this.rowDetail.subme_ipv6=t.subme_ipv6&&"string"===typeof t.subme_ipv6?JSON.parse(t.subme_ipv6):[],this.rowDetail.gatewayInfo=t.gatewayInfo,console.log(this.rowDetail),this.viewDialogFlag=!0},getAsyncList:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,Object(o["a"])(e.viewTablePost);case 3:a=t.sent,200==a.code&&a.data?(e.viewTableData.data=a.data.obj,e.viewTableData.total=a.data.total):(e.viewTableData.data=[],e.viewTableData.total=0),e.isLoading=!1;case 6:case"end":return t.stop()}}),t)})))()},deleteBtn:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function a(){var s,i;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=e.id,a.next=3,deletebackupdata({id:s});case 3:i=a.sent,200==i.code?(t.$message({message:"删除成功",type:"success"}),t.getAsyncList()):t.$message({message:"删除失败!",type:"warning"});case 5:case"end":return a.stop()}}),a)})))()}}},l=c,u=(a("df1c"),a("2877")),d=Object(u["a"])(l,s,i,!1,null,"26c6c0b5",null);t["default"]=d.exports},c273:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"errPage-container"},[a("ErrorA"),a("ErrorB"),a("h3",[e._v("Please click the bug icon in the upper right corner")]),e._m(0),e._m(1)],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("aside",[e._v(" Now the management system are basically the form of the spa, it enhances the user experience, but it also increases the possibility of page problems, a small negligence may lead to the entire page deadlock. Fortunately Vue provides a way to catch handling exceptions, where you can handle errors or report exceptions. "),a("a",{staticClass:"link-type",attrs:{target:"_blank",href:"https://panjiachen.github.io/vue-element-admin-site/guide/advanced/error.html"}},[e._v(" Document introduction ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{attrs:{href:"#"}},[a("img",{attrs:{src:"https://wpimg.wallstcn.com/360e4842-4db5-42d0-b078-f9a84a825546.gif"}})])}],n=a("ce2f"),r=a("a1ba"),o={name:"ErrorLog",components:{ErrorA:n["default"],ErrorB:r["default"]}},c=o,l=(a("e723"),a("2877")),u=Object(l["a"])(c,s,i,!1,null,"a1953900",null);t["default"]=u.exports},c4df:function(e,t,a){},c62e:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"social-signup-container"},[a("div",{staticClass:"sign-btn",on:{click:function(t){return e.wechatHandleClick("wechat")}}},[a("span",{staticClass:"wx-svg-container"},[a("svg-icon",{staticClass:"icon",attrs:{"icon-class":"wechat"}})],1),e._v(" WeChat ")]),a("div",{staticClass:"sign-btn",on:{click:function(t){return e.tencentHandleClick("tencent")}}},[a("span",{staticClass:"qq-svg-container"},[a("svg-icon",{staticClass:"icon",attrs:{"icon-class":"qq"}})],1),e._v(" QQ ")])])},i=[],n={name:"SocialSignin",methods:{wechatHandleClick:function(e){alert("ok")},tencentHandleClick:function(e){alert("ok")}}},r=n,o=(a("bfec"),a("2877")),c=Object(o["a"])(r,s,i,!1,null,"7309fbbb",null);t["default"]=c.exports},cbcf:function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"d",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return c}));var s=a("b775");function i(){return Object(s["a"])({url:"/admin/area/all",method:"get"})}function n(){return Object(s["a"])({url:"/admin/license/systemInfo",method:"get"})}function r(){return Object(s["a"])({url:"/admin/license/query",method:"get"})}function o(e){return Object(s["a"])({url:"/admin/license/update",method:"put",data:e})}function c(e){return Object(s["a"])({url:"/admin/license/applicant/code",method:"post",data:e})}},cc6c:function(e,t,a){e.exports=a.p+"static/img/401.089007e7.gif"},ce2f:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(" "+e._s(e.a.a)+" ")])},i=[],n={name:"ErrorTestA"},r=n,o=a("2877"),c=Object(o["a"])(r,s,i,!1,null,null,null);t["default"]=c.exports},d22e:function(e,t,a){"use strict";a("852b")},d78e:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container",staticStyle:{"max-width":"900px"}},[a("div",{staticClass:"p-b-10"},[a("el-button-group",[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"mini"},on:{click:e.handleAdd}},[e._v("新增角色")])],1)],1),a("viewTable",{attrs:{"table-data":e.viewTableData},on:{tabSelect:e.onTabSelect,edit:e.onRowEdit,deleteBtn:e.onRowDel}}),a("Pagination",{ref:"pagain",attrs:{"current-page":e.postData.currentPage,total:e.viewTableData.total},on:{"update:currentPage":function(t){return e.$set(e.postData,"currentPage",t)},"update:current-page":function(t){return e.$set(e.postData,"currentPage",t)},handleCurrentpage:e.getListAsync}}),a("el-dialog",{attrs:{title:"角色管理",visible:e.dialogFormVisible,"close-on-click-modal":!1,top:"2%"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.closeTank}},[a("el-form",{ref:"editForm",attrs:{"label-width":"100px",size:"mini",model:e.editForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{model:{value:e.editForm.info,callback:function(t){e.$set(e.editForm,"info",t)},expression:"editForm.info"}})],1),a("el-form-item",{attrs:{label:"应用权限"}},[a("el-checkbox-group",{model:{value:e.editForm.client_id,callback:function(t){e.$set(e.editForm,"client_id",t)},expression:"editForm.client_id"}},e._l(e.appList,(function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])})),1)],1),a("el-form-item",{attrs:{label:"菜单权限"}},[a("el-tree",{ref:"treeSelect",staticStyle:{"max-height":"30vh",overflow:"auto"},attrs:{data:e.roleList,"show-checkbox":"","default-expand-all":"","node-key":"id",props:e.defaultProps}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"norepeat",rawName:"v-norepeat"}],attrs:{size:"small",type:"primary"},on:{click:e.submitFrom}},[e._v("确 定")]),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")])],1)],1)],1)},i=[],n=a("c7eb"),r=a("1da1"),o=(a("b0c0"),a("d3b7"),a("159b"),a("b775"));function c(e){return Object(o["a"])({url:"/admin/role/list",method:"post",data:e})}function l(){return Object(o["a"])({url:"/admin/role/add",method:"get"})}function u(e){return Object(o["a"])({url:"/admin/role/save",method:"post",data:e})}function d(e){return Object(o["a"])({url:"/admin/role/update",method:"post",data:e})}function p(e){return Object(o["a"])({url:"/admin/role/delete",method:"DELETE",data:{id:e}})}var m={name:"Role",data:function(){return{postData:{currentPage:1,pageSize:10},viewTableData:{data:[],total:0,isLoading:!1,style:"min-height:500px;",column:[{label:"名称",prop:"name"},{label:"备注",prop:"info"},{label:"操作",prop:"actions",actionBtn:[{emit:"edit",icon:"el-icon-edit-outline"},{emit:"deleteBtn",icon:"el-icon-delete"}]}]},dialogFormVisible:!1,editForm:{name:"",info:"",client_id:[]},appList:[],roleList:[],rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}]},defaultCheckedArr:[],defaultProps:{children:"childrenList",label:"name"}}},mounted:function(){this.getListAsync()},methods:{getListAsync:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.viewTableData.data=[],t.next=3,c(e.postData);case 3:a=t.sent,200==a.code?(e.viewTableData.data=a.data.obj,e.viewTableData.total=a.data.total):e.viewTableData.total=0;case 5:case"end":return t.stop()}}),t)})))()},handleAdd:function(){var e=this;l().then((function(t){var a=t.data;e.roleList=a.obj,e.appList=a.clients,e.dialogFormVisible=!0}))},onRowEdit:function(e){var t=this;d({id:e.id}).then((function(e){if(200==e.code){var a=e.data;t.appList=a.clients,t.roleList=a.resList;var s=a.obj,i=s.id,n=s.name,r=s.info,o=s.client_ids,c=s.res_ids;t.editForm={id:i,name:n,info:r,client_id:o},t.dialogFormVisible=!0,t.defaultCheckedArr=c,t.$nextTick((function(){t.defaultCheckedArr.forEach((function(e){t.$refs.treeSelect.setChecked(e,!0)}))}))}}))},submitFrom:function(){var e=this;this.$refs.editForm.validate((function(t){if(!t)return!1;var a=e.editForm,s={id:a.id,name:a.name,info:a.info,client_id:a.client_id,res_id:e.$refs.treeSelect.getCheckedKeys()};u(s).then((function(t){200==t.code?(e.$message({message:"保存成功!",type:"success"}),e.dialogFormVisible=!1,e.getListAsync()):e.$message({message:"保存失败",type:"error"})})).catch((function(e){console.log(e)}))}))},onRowDel:function(e){var t=this;this.$confirm("将要删除该条目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(Object(n["a"])().mark((function a(){var s;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.editForm=Object.assign({},e),a.next=3,p(e.id);case 3:s=a.sent,200==s.code?(t.$message({title:"成功",message:"删除成功",type:"success"}),t.getListAsync()):t.$message({title:"删除失败",message:s.msg,type:"error"});case 5:case"end":return a.stop()}}),a)}))))},onTabSelect:function(e){console.log(e)},closeTank:function(){this.defaultCheckedArr=[],this.editForm={name:"",info:"",client_id:[]}}}},f=m,b=a("2877"),v=Object(b["a"])(f,s,i,!1,null,"62773e29",null);t["default"]=v.exports},dab7:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"flexBox p-b-10"},[a("div",[a("el-button-group",{staticClass:"filter-item"},[a("el-button",{attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:e.getAsyncList}},[e._v("刷新")])],1)],1),a("div",[a("el-input",{staticClass:"m-l-10 m-r-10",staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"姓名/学籍号查找","prefix-icon":"el-icon-search",clearable:""},on:{clear:function(t){e.viewTablePost.currentPage=1,e.getAsyncList()}},nativeOn:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.viewTablePost.currentPage=1,e.getAsyncList()}},model:{value:e.viewTablePost.XM,callback:function(t){e.$set(e.viewTablePost,"XM",t)},expression:"viewTablePost.XM"}}),a("el-select",{staticClass:"m-r-10",attrs:{placeholder:"用户类型",size:"mini"},model:{value:e.viewTablePost.userType,callback:function(t){e.$set(e.viewTablePost,"userType",t)},expression:"viewTablePost.userType"}}),a("GroupSelectInput",{ref:"GroupSelectInput",staticClass:"m-r-10",staticStyle:{width:"200px"}}),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至",size:"mini","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.viewTablePost.time,callback:function(t){e.$set(e.viewTablePost,"time",t)},expression:"viewTablePost.time"}})],1)]),a("viewTable",{attrs:{"table-data":e.viewTableData},on:{tabSelect:e.handleSelectionChange}}),a("Pagination",{ref:"pagain",attrs:{total:e.viewTableData.total,"current-page":e.viewTablePost.currentPage,pageSize:e.viewTablePost.pageSize},on:{"update:currentPage":function(t){return e.$set(e.viewTablePost,"currentPage",t)},"update:current-page":function(t){return e.$set(e.viewTablePost,"currentPage",t)},"update:pageSize":function(t){return e.$set(e.viewTablePost,"pageSize",t)},"update:page-size":function(t){return e.$set(e.viewTablePost,"pageSize",t)},handleCurrentpage:e.getAsyncList}})],1)},i=[],n=a("c7eb"),r=a("1da1"),o=a("71da"),c=a("4b25"),l=(a("ed08"),{components:{GroupSelectInput:c["a"]},data:function(){return{viewTablePost:{currentPage:1,pageSize:15,type:1},viewTableData:{data:[],total:0,isLoading:!1,selection:!0,style:"min-height:500px;",column:[{label:"账号",prop:"account"},{label:"姓名",prop:"name"},{label:"部门",prop:"MC"},{label:"操作",prop:"action"},{label:"IP",prop:"ip"},{label:"访问时间",prop:"addTime"}]},tableSelection:[]}},mounted:function(){this.getAsyncList()},methods:{getAsyncList:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.viewTableData.isLoading=!0,t.next=3,Object(o["a"])(e.viewTablePost);case 3:a=t.sent,200==a.code&&a.data?(e.viewTableData.data=a.data.obj,e.viewTableData.total=a.data.total):(e.viewTableData.data=[],e.viewTableData.total=0),e.viewTableData.isLoading=!1;case 6:case"end":return t.stop()}}),t)})))()},handleSelectionChange:function(e){this.tableSelection=e},deleteBtn:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function a(){var s,i;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=e.id,a.next=3,deletebackupdata({id:s});case 3:i=a.sent,200==i.code?(t.$message({message:"删除成功",type:"success"}),t.getAsyncList()):t.$message({message:"删除失败!",type:"warning"});case 5:case"end":return a.stop()}}),a)})))()}}}),u=l,d=a("2877"),p=Object(d["a"])(u,s,i,!1,null,null,null);t["default"]=p.exports},df1c:function(e,t,a){"use strict";a("6145")},e20a:function(e,t,a){"use strict";a("eeb3")},e382:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"clearfix"},[a("span",{staticStyle:{"line-height":"28px"}},[e._v("用户管理")]),a("div",{staticClass:"fr"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleAdd}},[e._v("添加用户")]),a("el-button",{attrs:{size:"small",type:"info"},on:{click:function(t){return e.$router.push({path:"/"})}}},[e._v("返回首页")])],1)])]},proxy:!0}])},[a("viewTable",{attrs:{"table-data":e.tableData},on:{tabSelect:e.onTabSelect,emitDdit:e.onRowEdit,emitDel:e.onRowDel}}),a("Pagination",{ref:"pagain",attrs:{"current-page":e.postData.currentPage,pageSize:e.postData.pageSize,total:e.tableData.total},on:{"update:currentPage":function(t){return e.$set(e.postData,"currentPage",t)},"update:current-page":function(t){return e.$set(e.postData,"currentPage",t)},"update:pageSize":function(t){return e.$set(e.postData,"pageSize",t)},"update:page-size":function(t){return e.$set(e.postData,"pageSize",t)},handleCurrentpage:e.getUserList}}),a("el-dialog",{attrs:{width:"600px",title:"用户管理",visible:e.dialogFormVisible,"close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.close}},[a("el-form",{ref:"editForm",attrs:{"label-width":"100px",model:e.editForm,rules:e.rules,size:"mini"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入用户名",autocomplete:"off"},model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,"username",t)},expression:"editForm.username"}})],1),a("el-form-item",{attrs:{label:e.editForm.id?"重置密码":"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.editForm.password,callback:function(t){e.$set(e.editForm,"password",t)},expression:"editForm.password"}})],1),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.editForm.checkPass,callback:function(t){e.$set(e.editForm,"checkPass",t)},expression:"editForm.checkPass"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"norepeat",rawName:"v-norepeat"}],attrs:{size:"mini",type:"primary"},on:{click:e.submitFrom}},[e._v("确 定")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")])],1)],1)],1)},i=[],n=a("c7eb"),r=a("1da1"),o=(a("a15b"),a("d81d"),a("c24f")),c={data:function(){var e=this,t=function(e,t,a){t&&(t.length<6||t.length>20)&&a(new Error("密码长度为6~20个字符")),a()},a=function(t,a,s){a?a!==e.editForm.password&&s(new Error("两次输入密码不一致!")):s(),s()};return{postData:{currentPage:1,pageSize:10,status:0,type:0},tableData:{selection:!0,isLoading:!1,data:[],total:0,column:[{label:"序号",width:50},{label:"用户名",prop:"username"},{label:"密码",propFilter:function(){return"****"}},{label:"操作",width:100,actionBtn:[{emit:"emitDdit",icon:"el-icon-edit"},{emit:"emitDel",icon:"el-icon-delete"}]}]},dialogFormVisible:!1,editForm:{username:"",password:"",checkPass:""},rules:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,validator:t,trigger:"blur"}],checkPass:[{required:!0,validator:a,trigger:"blur"}]},tableSelectArr:[]}},mounted:function(){this.getUserList()},methods:{getUserList:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tableData.isLoading=!0,e.tableData.data=[],t.next=4,Object(o["d"])(e.postData);case 4:a=t.sent,200==a.code&&a.data?(e.tableData.data=a.data.obj,e.tableData.total=a.data.total):e.tableData.total=0,e.tableData.isLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},userStatusChange:function(e){this.postData.currentPage=1,this.getUserList()},onRowEdit:function(e){this.rules.password[0].required=!1,this.rules.checkPass[0].required=!1,this.editForm={id:e.id,username:e.username,password:"",checkPass:""},this.dialogFormVisible=!0},handleAdd:function(){this.rules.password[0].required=!0,this.rules.checkPass[0].required=!0,this.dialogFormVisible=!0},submitFrom:function(){var e=this;this.$refs.editForm.validate((function(t){if(t){var a=e.editForm,s={username:a.username,password:a.password||"",verifyPassword:a.checkPass||""};e.editForm.id&&(s.id=String(e.editForm.id)),e.tankLoading=!0,Object(o["i"])(s).then((function(t){200==t.code?(e.$message({message:"保存成功!",type:"success"}),e.dialogFormVisible=!1,e.getUserList()):e.$message({message:t.msg||"保存失败",type:"error"}),e.tankLoading=!1})).catch((function(t){console.log(t),e.tankLoading=!1}))}}))},lockedBtn:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function a(){var s,i,r;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s="",i="",e&&e.id?(s=e.id,i=1==e.status?0:1):t.tableSelectArr.length&&(s=t.tableSelectArr.map((function(e){return e.id})).join(),i=1==t.tableSelectArr[0].status?0:1),a.next=5,Object(o["k"])({id:s,status:i});case 5:r=a.sent,200==r.code&&(1==i&&t.$message.success("用户已被禁用"),0==i&&t.$message.success("用户已启用"),t.getUserList());case 7:case"end":return a.stop()}}),a)})))()},onRowDel:function(e){var t=this;this.$confirm("将要删除用户"+e.username+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(Object(n["a"])().mark((function a(){var s;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(o["b"])({id:e.id});case 2:s=a.sent,200==s.code?(t.$message({title:"成功",message:"删除成功",type:"success"}),t.getUserList()):t.$message({message:"删除失败",type:"error"});case 4:case"end":return a.stop()}}),a)})))).catch((function(){}))},onTabSelect:function(e){this.tableSelectArr=e},allocationGroupBtn:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.tableSelectArr.length||e.$message.warning("请先选中用户");case 1:case"end":return t.stop()}}),t)})))()},close:function(){this.editForm={username:"",password:"",checkPass:""}}}},l=c,u=a("2877"),d=Object(u["a"])(l,s,i,!1,null,null,null);t["default"]=d.exports},e64c:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"flexBox p-b-10"},[a("div",[a("el-button-group",{staticClass:"filter-item"},[a("el-button",{attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:e.getAsyncList}},[e._v("刷新")])],1)],1),a("div",[a("el-input",{staticClass:"m-l-10 m-r-10",staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"姓名/学籍号查找","prefix-icon":"el-icon-search",clearable:""},on:{clear:function(t){e.viewTablePost.currentPage=1,e.getAsyncList()}},nativeOn:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.viewTablePost.currentPage=1,e.getAsyncList()}},model:{value:e.viewTablePost.XM,callback:function(t){e.$set(e.viewTablePost,"XM",t)},expression:"viewTablePost.XM"}}),a("el-select",{staticClass:"m-r-10",attrs:{placeholder:"用户类型",size:"mini"},model:{value:e.viewTablePost.userType,callback:function(t){e.$set(e.viewTablePost,"userType",t)},expression:"viewTablePost.userType"}}),a("GroupSelectInput",{ref:"GroupSelectInput",staticClass:"m-r-10",staticStyle:{width:"200px"}}),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至",size:"mini","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.viewTablePost.time,callback:function(t){e.$set(e.viewTablePost,"time",t)},expression:"viewTablePost.time"}})],1)]),a("viewTable",{attrs:{"table-data":e.viewTableData},on:{tabSelect:e.handleSelectionChange}}),a("Pagination",{ref:"pagain",attrs:{total:e.viewTableData.total,"current-page":e.viewTablePost.currentPage,pageSize:e.viewTablePost.pageSize},on:{"update:currentPage":function(t){return e.$set(e.viewTablePost,"currentPage",t)},"update:current-page":function(t){return e.$set(e.viewTablePost,"currentPage",t)},"update:pageSize":function(t){return e.$set(e.viewTablePost,"pageSize",t)},"update:page-size":function(t){return e.$set(e.viewTablePost,"pageSize",t)},handleCurrentpage:e.getAsyncList}})],1)},i=[],n=a("c7eb"),r=a("1da1"),o=a("71da"),c=a("4b25"),l=(a("ed08"),{components:{GroupSelectInput:c["a"]},data:function(){return{viewTablePost:{currentPage:1,pageSize:15,type:0},viewTableData:{data:[],total:0,isLoading:!1,selection:!0,style:"min-height:500px;",column:[{label:"账号",prop:"account"},{label:"姓名",prop:"name"},{label:"部门",prop:"MC"},{label:"操作",prop:"action"},{label:"IP",prop:"ip"},{label:"访问时间",prop:"addTime"}]},tableSelection:[]}},mounted:function(){this.getAsyncList()},methods:{getAsyncList:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.viewTableData.isLoading=!0,t.next=3,Object(o["a"])(e.viewTablePost);case 3:a=t.sent,200==a.code&&a.data?(e.viewTableData.data=a.data.obj,e.viewTableData.total=a.data.total):(e.viewTableData.data=[],e.viewTableData.total=0),e.viewTableData.isLoading=!1;case 6:case"end":return t.stop()}}),t)})))()},handleSelectionChange:function(e){this.tableSelection=e},deleteBtn:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function a(){var s,i;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=e.id,a.next=3,deletebackupdata({id:s});case 3:i=a.sent,200==i.code?(t.$message({message:"删除成功",type:"success"}),t.getAsyncList()):t.$message({message:"删除失败!",type:"warning"});case 5:case"end":return a.stop()}}),a)})))()}}}),u=l,d=a("2877"),p=Object(d["a"])(u,s,i,!1,null,null,null);t["default"]=p.exports},e723:function(e,t,a){"use strict";a("7f60")},ecf2:function(e,t,a){},eeb3:function(e,t,a){},ef73:function(e,t,a){"use strict";a("010d")},f1bd:function(e,t,a){},f3f7:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container",staticStyle:{"max-width":"1400px"}},[a("el-row",{staticClass:"mb10"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v(" 产品授权 ")])],1),a("viewTable",{ref:"viewTable",staticClass:"m-t-10",attrs:{"table-data":e.viewTableData}}),a("el-dialog",{attrs:{title:"产品授权",visible:e.dialogVisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(t){e.dialogVisible=t},close:function(t){e.authFrom.authCode=""}}},[a("el-form",{ref:"fromRef",attrs:{size:"mini","label-width":"80px",model:e.authFrom,rules:e.rules}},[a("el-form-item",{attrs:{label:"SN 码"}},[e._v(e._s(e.SNcode))]),a("el-form-item",{attrs:{prop:"authCode",label:"授权码"}},[a("el-input",{attrs:{autosize:{minRows:5,maxRows:10},placeholder:"请输入授权码",type:"textarea",clearable:"","auto-complete":"off",size:"mini"},model:{value:e.authFrom.authCode,callback:function(t){e.$set(e.authFrom,"authCode","string"===typeof t?t.trim():t)},expression:"authFrom.authCode"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.confirmAuth}},[e._v("确 定")])],1)],1)],1)},i=[],n=a("c7eb"),r=a("1da1"),o=(a("99af"),a("cbcf")),c=a("ed08"),l={data:function(){return{SNcode:"",licenseInfo:{},postData:{start:1,limit:15},viewTableData:{data:[],total:0,isLoading:!1,column:[{label:"版本",prop:"licenseVersion",width:80},{label:"授权防火墙数/已导入",propFilter:function(e,t){return"".concat(t.licenseFireWall," / ").concat(t.useFirewall)}},{label:"授权路由交换设备/已导入",propFilter:function(e,t){return"".concat(t.licenseRouter," / ").concat(t.useRouter)}},{label:"授权主机数/已导入",propFilter:function(e,t){return"".concat(t.licenseHost," / ").concat(t.useHost)}},{label:"授权模拟网关/已导入",propFilter:function(e,t){return"".concat(t.licenseUe," / ").concat(t.useUe)}},{label:"开始时间",prop:"startTime",propFilter:function(e){return Object(c["b"])(e)}},{label:"截止时间",prop:"endTime",propFilter:function(e){return Object(c["b"])(e)}},{label:"授权天数",prop:"licenseDay",width:80},{label:"剩余天数",prop:"surplusDay",width:80}]},dialogVisible:!1,authFrom:{authCode:""},rules:{authCode:[{required:!0,message:"授权码不能为空",trigger:"blur"}]}}},mounted:function(){this.getSystemInfo(),this.getLicenseInfo()},methods:{parseTime:c["b"],getLicenseInfo:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["c"])();case 2:a=t.sent,200==a.code?(e.licenseInfo=a.data,e.viewTableData.data=[a.data]):(e.licenseInfo={},e.viewTableData.data=[]);case 4:case"end":return t.stop()}}),t)})))()},getSystemInfo:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["d"])();case 2:a=t.sent,200==a.code?e.SNcode=a.data:e.$message({message:"数据获取失败!",type:"warning"});case 4:case"end":return t.stop()}}),t)})))()},confirmAuth:function(){var e=this;this.$refs.fromRef.validate(function(){var t=Object(r["a"])(Object(n["a"])().mark((function t(a){var s;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=5;break}return t.next=3,Object(o["b"])({license:e.authFrom.authCode});case 3:s=t.sent,200==s.code?(e.$message({type:"success",message:"授权成功"}),e.dialogVisible=!1,e.getSystemInfo(),e.getLicenseInfo()):e.$message({type:"error",message:s.msg||"授权失败"});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},u=l,d=a("2877"),p=Object(d["a"])(u,s,i,!1,null,null,null);t["default"]=p.exports},faab:function(e,t,a){"use strict";a("ecf2")}}]);